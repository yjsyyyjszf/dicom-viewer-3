{"ast":null,"code":"/*! cornerstone-file-image-loader - 0.3.0 - 2020-04-16 | (c) 2016 Chris Hafey | https://github.com/webnamics/cornerstoneFileImageLoader#readme */\n!function (e, t) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define(\"cornerstoneFileImageLoader\", [], t) : \"object\" == typeof exports ? exports.cornerstoneFileImageLoader = t() : e.cornerstoneFileImageLoader = t();\n}(window, function () {\n  return r = {}, a.m = n = [function (e, t, n) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    }), t.external = void 0;\n    var r,\n        a = n(6),\n        i = (r = a) && r.__esModule ? r : {\n      default: r\n    };\n    var o = void 0,\n        u = {\n      set cornerstone(e) {\n        o = e, (0, i.default)(o);\n      },\n\n      get cornerstone() {\n        return o;\n      }\n\n    };\n    t.external = u;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    }), t.default = function (u) {\n      return new Promise(function (e, t) {\n        var n = new Image(),\n            r = new Uint8Array(u),\n            a = new Blob([r]),\n            i = window.URL || window.webkitURL,\n            o = i.createObjectURL(a);\n        n.src = o, n.onload = function () {\n          e(n), i.revokeObjectURL(o);\n        }, n.onerror = function (e) {\n          i.revokeObjectURL(o), t(e);\n        };\n      });\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    }), t.default = function (t, n) {\n      var e = t.naturalHeight,\n          r = t.naturalWidth;\n      return {\n        imageId: n,\n        minPixelValue: 0,\n        maxPixelValue: 255,\n        slope: 1,\n        intercept: 0,\n        windowCenter: 128,\n        windowWidth: 255,\n        render: a.external.cornerstone.renderWebImage,\n        getPixelData: function () {\n          return function () {\n            var e = void 0;\n            o === n ? e = i.getContext(\"2d\") : (i.height = t.naturalHeight, i.width = t.naturalWidth, (e = i.getContext(\"2d\")).drawImage(t, 0, 0), o = n);\n            return e.getImageData(0, 0, t.naturalWidth, t.naturalHeight);\n          }().data;\n        },\n        getCanvas: function () {\n          return o === n || (i.height = t.naturalHeight, i.width = t.naturalWidth, i.getContext(\"2d\").drawImage(t, 0, 0), o = n), i;\n        },\n        getImage: function () {\n          return t;\n        },\n        rows: e,\n        columns: r,\n        height: e,\n        width: r,\n        color: !0,\n        rgba: !1,\n        columnPixelSpacing: void 0,\n        rowPixelSpacing: void 0,\n        invert: !1,\n        sizeInBytes: e * r * 4\n      };\n    };\n    var a = n(0),\n        i = document.createElement(\"canvas\"),\n        o = void 0;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    }), t.loadImage = function (a) {\n      var e = (0, c.default)(a),\n          t = parseInt(e.url, 10),\n          i = s.default.get(t);\n      {\n        if (\"imagefile\" === e.scheme) return {\n          promise: new Promise(function (n, r) {\n            var e = new FileReader();\n            e.onload = function (e) {\n              var t = e.target.result;\n              (0, u.default)(t).then(function (e) {\n                var t = (0, f.default)(e, a);\n                n(t);\n              }, r);\n            }, e.onerror = r, e.readAsArrayBuffer(i);\n          })\n        };\n        if (\"imagebuffer\" === e.scheme) return {\n          promise: new Promise(function (n, e) {\n            if (null != i) {\n              var t = i;\n              (0, u.default)(t).then(function (e) {\n                var t = (0, f.default)(e, a);\n                n(t);\n              }, e);\n            } else e(\"buffer is null or undefined\");\n          })\n        };\n        if (\"imageimage\" === e.scheme) return {\n          promise: new Promise(function (n, e) {\n            null != i ? (0, r.default)(i).then(function (e) {\n              var t = (0, f.default)(e, a);\n              n(t);\n            }, e) : e(\"image is null or undefined\");\n          })\n        };\n        if (\"imagecanvas\" === e.scheme) return {\n          promise: new Promise(function (n, e) {\n            null != i ? (0, l.default)(i).then(function (e) {\n              var t = (0, f.default)(e, a);\n              n(t);\n            }, e) : e(\"canvas is null or undefined\");\n          })\n        };\n\n        if (\"imagecustom\" === e.scheme) {\n          var o = new Date().getTime();\n          return {\n            promise: new Promise(function (n, e) {\n              var r = new Date().getTime();\n              null != i ? (0, d.default)(a, i).then(function (e) {\n                var t = new Date().getTime();\n                e.loadTimeInMS = r - o, e.totalTimeInMS = t - o, n(e);\n              }, e) : e(\"custom object is null or undefined\");\n            })\n          };\n        }\n      }\n    }, t.configure = function (e) {\n      e;\n    };\n    n(0);\n    var u = a(n(1)),\n        r = a(n(7)),\n        l = a(n(8)),\n        f = (a(n(9)), a(n(2))),\n        d = a(n(10)),\n        c = a(n(11)),\n        s = a(n(4));\n\n    function a(e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    }\n  }, function (e, t, n) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n    var r = [];\n    t.default = {\n      add: function (e) {\n        return \"imagefile:\" + (r.push(e) - 1);\n      },\n      addBuffer: function (e) {\n        return \"imagebuffer:\" + (r.push(e) - 1);\n      },\n      addImage: function (e) {\n        return \"imageimage:\" + (r.push(e) - 1);\n      },\n      addCanvas: function (e) {\n        return \"imagecanvas:\" + (r.push(e) - 1);\n      },\n      addCustom: function (e) {\n        return \"imagecustom:\" + (r.push(e) - 1);\n      },\n      get: function (e) {\n        return r[e];\n      },\n      remove: function (e) {\n        r[e] = void 0;\n      },\n      purge: function () {\n        r = [];\n      }\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    }), t.fileManager = t.external = t.configure = t.loadImage = t.createImage = t.arrayBufferToImage = void 0;\n    var r = l(n(1)),\n        a = l(n(2)),\n        i = l(n(4)),\n        o = n(3),\n        u = n(0);\n\n    function l(e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    }\n\n    var f = {\n      arrayBufferToImage: r.default,\n      createImage: a.default,\n      loadImage: o.loadImage,\n      configure: o.configure,\n      external: u.external,\n      fileManager: i.default\n    };\n    t.arrayBufferToImage = r.default, t.createImage = a.default, t.loadImage = o.loadImage, t.configure = o.configure, t.external = u.external, t.fileManager = i.default, t.default = f;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    }), t.default = function (e) {\n      e.registerImageLoader(\"imagefile\", r.loadImage), e.registerImageLoader(\"imagebuffer\", r.loadImage), e.registerImageLoader(\"imageimage\", r.loadImage), e.registerImageLoader(\"imagecanvas\", r.loadImage), e.registerImageLoader(\"imagecustom\", r.loadImage);\n    };\n    var r = n(3);\n  }, function (e, t, n) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    }), t.default = function (n) {\n      return new Promise(function (e, t) {\n        n.onload = function () {\n          e(n);\n        }, n.onerror = function (e) {\n          t(e);\n        };\n      });\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    }), t.default = function (r) {\n      return new Promise(function (e, t) {\n        var n = new Image();\n        n.src = r.toDataURL(\"image/jpeg\"), n.onload = function () {\n          e(n);\n        }, n.onerror = function (e) {\n          t(e);\n        };\n      });\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    }), t.default = function (e) {\n      return new Promise(function (e, t) {\n        var n = new Image();\n        n.src = canvas.toDataURL(\"image/jpeg\"), n.onload = function () {\n          e(n);\n        }, n.onerror = function (e) {\n          t(e);\n        };\n      });\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    }), t.default = function (e, t) {\n      var n = t.rows,\n          r = t.columns,\n          a = void 0;\n      return (a = {\n        imageId: e,\n        minPixelValue: t.image.minPixelValue,\n        maxPixelValue: t.image.maxPixelValue,\n        slope: t.image.slope,\n        intercept: t.image.intercept,\n        windowCenter: t.image.windowCenter,\n        windowWidth: t.image.windowWidth,\n        rows: n,\n        columns: r,\n        height: n,\n        width: r,\n        color: t.image.color,\n        rgba: t.image.rgba,\n        columnPixelSpacing: t.image.columnPixelSpacing,\n        rowPixelSpacing: t.image.rowPixelSpacing,\n        invert: t.image.invert,\n        sizeInBytes: n * r * 4,\n        getPixelData: function () {\n          return t.pixelData;\n        }\n      }).modalityLUT = t.image.modalityLUT, a.voiLUT = t.image.voiLUT, a.data = t.image.data, new Promise(function (e, t) {\n        e(a);\n      });\n    };\n    n(0);\n  }, function (e, t, n) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    }), t.default = function (e) {\n      var t = e.indexOf(\":\"),\n          n = e.substring(t + 1),\n          r = n.indexOf(\"frame=\"),\n          a = void 0;\n\n      if (-1 !== r) {\n        var i = n.substr(r + 6);\n        a = parseInt(i, 10), n = n.substr(0, r - 1);\n      }\n\n      return {\n        scheme: e.substr(0, t),\n        url: n,\n        frame: a\n      };\n    };\n  }], a.c = r, a.d = function (e, t, n) {\n    a.o(e, t) || Object.defineProperty(e, t, {\n      enumerable: !0,\n      get: n\n    });\n  }, a.r = function (e) {\n    \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n      value: \"Module\"\n    }), Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    });\n  }, a.t = function (t, e) {\n    if (1 & e && (t = a(t)), 8 & e) return t;\n    if (4 & e && \"object\" == typeof t && t && t.__esModule) return t;\n    var n = Object.create(null);\n    if (a.r(n), Object.defineProperty(n, \"default\", {\n      enumerable: !0,\n      value: t\n    }), 2 & e && \"string\" != typeof t) for (var r in t) a.d(n, r, function (e) {\n      return t[e];\n    }.bind(null, r));\n    return n;\n  }, a.n = function (e) {\n    var t = e && e.__esModule ? function () {\n      return e.default;\n    } : function () {\n      return e;\n    };\n    return a.d(t, \"a\", t), t;\n  }, a.o = function (e, t) {\n    return Object.prototype.hasOwnProperty.call(e, t);\n  }, a.p = \"\", a(a.s = 5);\n\n  function a(e) {\n    if (r[e]) return r[e].exports;\n    var t = r[e] = {\n      i: e,\n      l: !1,\n      exports: {}\n    };\n    return n[e].call(t.exports, t, t.exports, a), t.l = !0, t.exports;\n  }\n\n  var n, r;\n});","map":null,"metadata":{},"sourceType":"script"}