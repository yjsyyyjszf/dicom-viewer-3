{"ast":null,"code":"var _jsxFileName = \"E:\\\\private\\\\projects\\\\udv\\\\u-dicom-viewer-master-1\\\\u-dicom-viewer-master\\\\src\\\\App.js\";\nimport React, { PureComponent } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport { connect } from 'react-redux';\nimport Dicomdir from './components/Dicomdir';\nimport DicomViewer from './components/DicomViewer';\nimport DicomHeader from './components/DicomHeader';\nimport Measurements from './components/Measurements';\nimport Settings from './components/Settings';\nimport AboutDlg from './components/AboutDlg';\nimport Histogram from './components/Histogram';\nimport LayoutTool from './components/LayoutTool';\nimport FsUI from './components/FsUI';\nimport DownloadZipDlg from './components/DownloadZipDlg';\nimport OpenMultipleFilesDlg from './components/OpenMultipleFilesDlg';\nimport AppBar from '@material-ui/core/AppBar';\nimport Collapse from '@material-ui/core/Collapse';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Divider from '@material-ui/core/Divider';\nimport Drawer from '@material-ui/core/Drawer';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport Icon from '@mdi/react';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Popover from '@material-ui/core/Popover';\nimport Slider from '@material-ui/core/Slider';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport TextField from '@material-ui/core/TextField';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography'; //import { FixedSizeList } from 'react-window'\n//import {List as ListVirtual} from 'react-virtualized'\n\nimport { isMobile, isTablet } from 'react-device-detect';\nimport { clearStore, localFileStore, dcmIsOpen, activeDcm, activeDcmIndex, activeMeasurements, setLayout, dcmTool, setDicomdir, setZippedFile, setVolume, filesStore } from './actions/index';\nimport { log, getPixelSpacing, getSpacingBetweenSlice, getSliceThickness, getSliceLocation //getFileNameCorrect,\n, getFileExtReal, isInputDirSupported, getSettingsFsView, getSettingsDicomdirView, getSettingsMprInterpolation } from './functions';\nimport { mdiAngleAcute, mdiArrowAll, mdiAxisArrow, mdiCamera, mdiChartHistogram, mdiCheck, mdiCheckboxIntermediate, mdiContentSaveOutline, mdiCursorDefault, mdiCursorPointer, mdiDelete, mdiEllipse, mdiEyedropper, mdiFileCabinet, mdiFileDocument, mdiFileCad, mdiFolder, mdiFolderMultiple, mdiGesture, mdiViewGridPlusOutline, mdiImageEdit, mdiInformationOutline, mdiInvertColors, mdiMagnify, mdiFolderOpen, mdiRefresh, mdiRectangle, mdiRuler, mdiSettings, mdiToolbox, mdiTools, mdiTrashCanOutline, mdiVideo, mdiWeb, mdiPlay, mdiPause, mdiSkipBackward, mdiSkipForward, mdiSkipNext, mdiSkipPrevious } from '@mdi/js';\nimport './App.css';\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\nimport Popper from \"@material-ui/core/Popper\";\nimport Grow from \"@material-ui/core/Grow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport MenuList from \"@material-ui/core/MenuList\";\nlog(); //localStorage.setItem(\"debug\", \"cornerstoneTools\")\n\nconst drawerWidth = 240;\nconst iconColor = '#FFFFFF';\nlet iconTool = null;\n\nconst styles = theme => ({\n  '@global': {\n    body: {\n      backgroundColor: theme.palette.common.black\n    }\n  },\n  grow: {\n    flexGrow: 1\n  },\n  root: {\n    display: 'flex'\n  },\n  menuButton: {\n    marginRight: theme.spacing(2)\n  },\n  title: {\n    flexGrow: 1\n  },\n  appBar: {\n    position: 'relative',\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    })\n  },\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen\n    })\n  },\n  hide: {\n    display: 'none'\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n    whiteSpace: 'nowrap'\n  },\n  drawerOpen: {\n    width: drawerWidth,\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen\n    })\n  },\n  drawerClose: {\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    }),\n    overflowX: 'hidden',\n    width: theme.spacing(7) + 1,\n    [theme.breakpoints.up('sm')]: {\n      width: theme.spacing(9) + 1\n    }\n  },\n  // Loads information about the app bar, including app bar height\n  toolbar: theme.mixins.toolbar,\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3)\n  },\n  listItemText: {\n    fontSize: '0.85em',\n    marginLeft: '-20px'\n  }\n});\n\nclass App extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchorElLayout: null,\n      openMenu: false,\n      openImageEdit: false,\n      openTools: false,\n      openMpr: false,\n      visibleMainMenu: true,\n      visibleHeader: false,\n      visibleSettings: false,\n      visibleToolbar: true,\n      visibleOpenUrl: false,\n      visibleToolbox: false,\n      visibleMeasure: false,\n      visibleClearMeasureDlg: false,\n      visibleAbout: false,\n      visibleDicomdir: false,\n      visibleFileManager: false,\n      visibleZippedFileDlg: false,\n      visibleDownloadZipDlg: false,\n      visibleOpenMultipleFilesDlg: false,\n      toolState: 1,\n      sliceIndex: 0,\n      sliceMax: 1,\n      listOpenFilesScrolling: false,\n      visibleVolumeBuilding: false,\n      visibleMprOrthogonal: false,\n      visibleMprCoronal: false,\n      visibleMprSagittal: false,\n      visibleMprAxial: false,\n      anchorEl: null\n    };\n\n    this.setDcmViewer = index => {\n      return React.createElement(DicomViewer, {\n        dcmRef: ref => {\n          this.dicomViewersRefs[index] = ref;\n        },\n        index: index,\n        runTool: ref => this.runTool = ref,\n        changeTool: ref => this.changeTool = ref,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      });\n    };\n\n    this.getDcmViewerRef = index => {\n      return this.dicomViewersRefs[index];\n    };\n\n    this.getDcmViewer = index => {\n      return this.dicomViewers[index];\n    };\n\n    this.getActiveDcmViewer = () => {\n      return this.dicomViewersRefs[this.props.activeDcmIndex];\n    };\n\n    this.toggleFileManager = () => {\n      if (getSettingsFsView() === 'left') {\n        this.setState({\n          visibleMainMenu: false,\n          visibleFileManager: !this.state.visibleFileManager\n        });\n      } else {\n        this.setState({\n          visibleFileManager: !this.state.visibleFileManager\n        });\n      }\n    };\n\n    this.handleOpenLocalFs = filesSelected => {\n      //console.log('handleOpenLocalFs: ', filesSelected)\n      if (filesSelected.length > 1) {\n        this.files = filesSelected;\n        this.changeLayout(1, 1);\n        this.mprPlane = '';\n        this.volume = [];\n\n        for (let i = 0; i < 16; i++) if (this.dicomViewersRefs[i] !== undefined) {// this.dicomViewersRefs[i].runTool('clear')\n        }\n\n        this.setState({\n          sliceIndex: 0,\n          sliceMax: 1,\n          visibleMprOrthogonal: false,\n          visibleMprCoronal: false,\n          visibleMprSagittal: false,\n          visibleMprAxial: false\n        }, () => {\n          this.setState({\n            visibleOpenMultipleFilesDlg: true\n          });\n        });\n      } else {\n        const file = filesSelected[0]; //console.log('file: ', file)\n\n        if (file.type === 'application/x-zip-compressed' || file.type === 'application/zip') {\n          this.file = file;\n          this.url = null;\n          this.setState({\n            visibleZippedFileDlg: true\n          });\n        } else {\n          this.setState({\n            sliceIndex: 0,\n            sliceMax: 1\n          });\n          this.props.setLocalFileStore(file);\n          this.dicomViewersRefs[this.props.activeDcmIndex].runTool('clear');\n          this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openLocalFs', file);\n        }\n      }\n    };\n\n    this.handleOpenSandboxFs = fsItem => {\n      //this.hideMainMenu()\n      this.dicomViewersRefs[this.props.activeDcmIndex].runTool('clear');\n      this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openSandboxFs', fsItem);\n    };\n\n    this.handleOpenImage = index => {\n      //console.log('handleOpenImage : ', index)\n      const visibleMprOrthogonal = this.state.visibleMprOrthogonal;\n      const visibleMprSagittal = this.state.visibleMprSagittal;\n      const visibleMprCoronal = this.state.visibleMprCoronal;\n      const visibleMprAxial = this.state.visibleMprAxial;\n      const plane = this.mprPlanePosition(); //console.log('plane: ', plane)\n\n      if (visibleMprOrthogonal) {\n        if (this.props.activeDcmIndex === 0) {\n          this.dicomViewersRefs[0].runTool('openimage', index);\n        } else if (this.props.activeDcmIndex === 1) {\n          if (plane === 'sagittal') {\n            // then open axial plane in second view\n            this.dicomViewersRefs[1].mprRenderXZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);\n          } else if (plane === 'axial') {\n            // then open coronal plane in second view\n            this.dicomViewersRefs[1].mprRenderXZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);\n          } else {\n            // plane is coronal, then open axial in second view\n            this.dicomViewersRefs[1].mprRenderXZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);\n          }\n        } else if (this.props.activeDcmIndex === 2) {\n          if (plane === 'sagittal') {\n            // then open axial plane in second view\n            this.dicomViewersRefs[2].mprRenderYZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);\n          } else if (plane === 'axial') {\n            // then open coronal plane in second view\n            this.dicomViewersRefs[2].mprRenderYZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);\n          } else {\n            // plane is coronal, then open axial in second view\n            this.dicomViewersRefs[2].mprRenderYZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);\n          }\n        }\n      } else if (plane === 'sagittal' && visibleMprSagittal || plane === 'axial' && visibleMprAxial || plane === 'coronal' && visibleMprCoronal) this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openimage', index);else if (plane === 'sagittal' && visibleMprAxial) this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderXZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);else if (plane === 'sagittal' && visibleMprCoronal) this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderYZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);else if (plane === 'axial' && visibleMprSagittal) this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderYZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);else if (plane === 'axial' && visibleMprCoronal) this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderXZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);else if (plane === 'coronal' && visibleMprSagittal) this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderYZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);else if (plane === 'coronal' && visibleMprAxial) this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderXZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);else // it's not a possible MPR, then open as normal dicom file  \n        this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openimage', index);\n    };\n\n    this.handleOpenFileDicomdir = file => {\n      this.dicomViewersRefs[this.props.activeDcmIndex].runTool('clear');\n      this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openLocalFs', file);\n    };\n\n    this.handleOpenFsDicomdir = fsItem => {\n      this.props.setDicomdirStore({\n        origin: 'fs',\n        dicomdir: fsItem,\n        files: []\n      });\n      this.toggleDicomdir();\n    };\n\n    this.showAppBar = () => {\n      window.scrollTo(0, 0);\n    };\n\n    this.toggleMainMenu = () => {\n      const visibleMainMenu = this.state.visibleMainMenu; //const visibleFileManager = this.state.visibleFileManager\n\n      if (getSettingsFsView() === 'left') {\n        this.setState({\n          visibleMainMenu: !visibleMainMenu,\n          visibleFileManager: false\n        });\n      } else {\n        this.setState({\n          visibleMainMenu: !visibleMainMenu\n        });\n      }\n    };\n\n    this.showMainMenu = () => {\n      this.setState({\n        visibleMainMenu: true\n      });\n    };\n\n    this.hideMainMenu = () => {\n      this.setState({\n        visibleMainMenu: false\n      });\n    };\n\n    this.handleVisibility = visibleMainMenu => {\n      this.setState({\n        visibleMainMenu\n      });\n    };\n\n    this.toggleHeader = () => {\n      const visible = !this.state.visibleHeader;\n      this.setState({\n        visibleHeader: visible\n      });\n      if (visible) this.setState({\n        visibleMeasure: false,\n        visibleToolbox: false,\n        visibleDicomdir: false,\n        visibleFileManager: false\n      });\n    };\n\n    this.toggleToolbox = () => {\n      const visible = !this.state.visibleToolbox;\n      this.setState({\n        visibleToolbox: visible\n      });\n      if (visible) this.setState({\n        visibleMeasure: false,\n        visibleHeader: false,\n        visibleDicomdir: false,\n        visibleFileManager: false\n      });\n    };\n\n    this.saveMeasure = () => {\n      this.dicomViewersRefs[this.props.activeDcmIndex].runTool('savetools');\n    };\n\n    this.toggleMeasure = () => {\n      const visible = !this.state.visibleMeasure;\n      this.setState({\n        visibleMeasure: visible\n      });\n      if (visible) this.setState({\n        visibleToolbox: false,\n        visibleHeader: false,\n        visibleDicomdir: false,\n        visibleFileManager: false\n      });\n    };\n\n    this.hideMeasure = () => {\n      this.setState({\n        visibleMeasure: false\n      });\n    };\n\n    this.handleVisibilityMeasure = visibleMeasure => {\n      this.setState({\n        visibleMeasure\n      });\n    };\n\n    this.toggleDicomdir = () => {\n      const visible = !this.state.visibleDicomdir;\n      console.log('toggleDicomdir: ', visible);\n      this.setState({\n        visibleDicomdir: visible\n      });\n      if (visible) this.setState({\n        visibleMeasure: false,\n        visibleToolbox: false,\n        visibleHeader: false,\n        visibleFileManager: false\n      });\n    };\n\n    this.clearMeasure = () => {\n      this.showClearMeasureDlg();\n    };\n\n    this.showClearMeasureDlg = () => {\n      this.setState({\n        visibleClearMeasureDlg: true\n      });\n    };\n\n    this.hideClearMeasureDlg = () => {\n      this.setState({\n        visibleClearMeasureDlg: false\n      });\n    };\n\n    this.confirmClearMeasureDlg = () => {\n      this.hideClearMeasureDlg();\n      this.dicomViewersRefs[this.props.activeDcmIndex].runTool('removetools');\n    };\n\n    this.showZippedFileDlg = () => {\n      this.setState({\n        visibleZippedFileDlg: true\n      });\n    };\n\n    this.hideZippedFileDlg = () => {\n      this.setState({\n        visibleZippedFileDlg: false\n      });\n    };\n\n    this.confirmZippedFileDlg = () => {\n      this.hideZippedFileDlg();\n      this.setState({\n        visibleFileManager: true\n      }, () => {\n        console.log('this.url: ', this.url);\n\n        if (this.url !== null) {\n          this.setState({\n            visibleDownloadZipDlg: true\n          });\n        } else {\n          this.props.setFsZippedFile(this.file);\n        }\n      });\n    };\n\n    this.showAbout = () => {\n      this.setState({\n        visibleAbout: !this.state.visibleAbout\n      });\n    };\n\n    this.showSettings = () => {\n      this.setState({\n        visibleMainMenu: false,\n        visibleSettings: true,\n        visibleToolbar: false,\n        position: 'right'\n      });\n    };\n\n    this.hideSettings = () => {\n      this.setState({\n        visibleMainMenu: true,\n        visibleSettings: false,\n        visibleToolbar: true,\n        visibleFileManager: false,\n        visibleDicomdir: false\n      });\n    };\n\n    this.handleVisibilitySettings = visibleSettings => {\n      this.setState({\n        visibleSettings\n      });\n    };\n\n    this.hideDownloadZipDlg = () => {\n      this.setState({\n        visibleDownloadZipDlg: false\n      });\n    };\n\n    this.hideOpenMultipleFilesDlg = () => {\n      this.setState({\n        visibleOpenMultipleFilesDlg: false\n      });\n      this.openMultipleFilesCompleted();\n    };\n\n    this.openMultipleFilesCompleted = () => {\n      if (this.props.files !== null) {\n        this.changeLayout(1, 1);\n        this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openimage', 0);\n        const sliceMax = this.props.files.length;\n        this.setState({\n          sliceMax: sliceMax\n        }, () => {\n          this.mprPlanePosition();\n          if (this.mprPlane === 'sagittal') this.setState({\n            visibleMprOrthogonal: false,\n            visibleMprSagittal: true,\n            visibleMprAxial: false,\n            visibleMprCoronal: false\n          });else if (this.mprPlane === 'coronal') this.setState({\n            visibleMprOrthogonal: false,\n            visibleMprSagittal: false,\n            visibleMprAxial: false,\n            visibleMprCoronal: true\n          });else this.setState({\n            visibleMprOrthogonal: false,\n            visibleMprSagittal: false,\n            visibleMprAxial: true,\n            visibleMprCoronal: false\n          });\n        });\n      }\n    };\n\n    this.showOpenUrl = () => {\n      this.setState({\n        visibleOpenUrl: true\n      });\n    };\n\n    this.hideOpenUrl = openDlg => {\n      this.setState({\n        visibleOpenUrl: false\n      }, () => {\n        if (openDlg) {\n          this.hideMainMenu();\n          this.file = null;\n          this.url = this.openUrlField.value; //console.log('this.url :', this.url)\n          //const ext = getFileExtReal(this.url)\n          //console.log('ext :', ext)\n\n          if (getFileExtReal(this.url) === 'zip') {\n            this.setState({\n              visibleZippedFileDlg: true\n            });\n          } else {\n            return this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openurl', this.openUrlField.value);\n          }\n        }\n      });\n    };\n\n    this.downloadOpenUrl = () => {\n      this.setState({\n        visibleOpenUrl: false,\n        visibleToolbar: true\n      });\n    };\n\n    this.resetImage = () => {\n      this.dicomViewersRefs[this.props.activeDcmIndex].runTool('reset');\n    };\n\n    this.saveShot = () => {\n      this.dicomViewersRefs[this.props.activeDcmIndex].runTool('saveas');\n    };\n\n    this.cinePlayer = () => {\n      this.dicomViewersRefs[this.props.activeDcmIndex].runTool('cine');\n    };\n\n    this.clear = () => {\n      this.setState({\n        openImageEdit: false,\n        openTools: false,\n        openMpr: false,\n        visibleToolbox: false,\n        visibleMeasure: false,\n        visibleHeader: false,\n        visibleDicomdir: false\n      });\n      this.changeLayout(1, 1);\n      this.props.setFilesStore(null);\n      this.props.setDicomdirStore(null);\n      this.props.clearingStore();\n      this.dicomViewersRefs[this.props.activeDcmIndex].runTool('clear');\n    };\n\n    this.handleLayout = event => {\n      this.setState({\n        anchorElLayout: event.currentTarget\n      });\n    };\n\n    this.closeLayout = () => {\n      this.setState({\n        anchorElLayout: null\n      });\n    };\n\n    this.changeLayout = (row, col) => {\n      // if reduce the grid clear the unused views\n      if (row < this.props.layout[0] || col < this.props.layout[1]) {\n        this.layoutGridClick(0);\n\n        for (let i = 0; i < 4; i++) {\n          for (let j = 0; j < 4; j++) {\n            if (i + 1 > row || j + 1 > col) {\n              const index = i * 4 + j;\n\n              if (this.dicomViewersRefs[index] !== undefined) {//this.dicomViewersRefs[index].runTool('clear')\n              }\n            }\n          }\n        }\n      }\n\n      this.props.setLayoutStore(row, col);\n    };\n\n    this.toolExecute = tool => {\n      this.hideMainMenu();\n\n      switch (tool) {\n        case 'notool':\n          iconTool = null;\n          this.setState({\n            toolState: null\n          });\n          break;\n\n        case 'Wwwc':\n          iconTool = mdiArrowAll;\n          break;\n\n        case 'Pan':\n          iconTool = mdiCursorPointer;\n          break;\n\n        case 'Zoom':\n          iconTool = mdiMagnify;\n          break;\n\n        case 'Length':\n          iconTool = mdiRuler;\n          break;\n\n        case 'Probe':\n          iconTool = mdiEyedropper;\n          break;\n\n        case 'Angle':\n          iconTool = mdiAngleAcute;\n          break;\n\n        case 'EllipticalRoi':\n          iconTool = mdiEllipse;\n          break;\n\n        case 'RectangleRoi':\n          iconTool = mdiRectangle;\n          break;\n\n        case 'FreehandRoi':\n          iconTool = mdiGesture;\n          break;\n\n        default:\n          break;\n      }\n\n      this.props.toolStore(tool);\n      this.dicomViewersRefs[this.props.activeDcmIndex].runTool(tool);\n    };\n\n    this.toolChange = () => {\n      const toolState = 1 - this.state.toolState;\n      this.setState({\n        toolState: toolState\n      }, () => {\n        this.changeTool.changeTool(this.props.tool, toolState);\n      });\n    };\n\n    this.toolRemove = index => {\n      this.dicomViewersRefs[this.props.activeDcmIndex].runTool('removetool', index);\n    };\n\n    this.toggleOpenMenu = event => {\n      if (this.state.openMenu) {\n        this.setState({\n          openMenu: !this.state.openMenu,\n          anchorEl: null\n        });\n      } else {\n        this.setState({\n          openMenu: !this.state.openMenu,\n          anchorEl: event.currentTarget\n        });\n      }\n    };\n\n    this.toggleImageEdit = () => {\n      this.setState({\n        openImageEdit: !this.state.openImageEdit\n      });\n    };\n\n    this.toggleTools = () => {\n      this.setState({\n        openTools: !this.state.openTools\n      });\n    };\n\n    this.toggleMpr = () => {\n      this.setState({\n        openMpr: !this.state.openMpr\n      });\n    };\n\n    this.layoutGridClick = index => {\n      if (isMobile && index === this.props.activeDcmIndex) return;\n      this.mprSliceIndex[this.props.activeDcmIndex] = this.state.sliceIndex;\n      this.props.setActiveDcmIndex(index);\n\n      if (this.state.visibleMprOrthogonal) {\n        if (index === 0) {\n          const sliceMax = this.props.files === null ? 1 : this.props.files.length;\n          this.setState({\n            sliceMax: sliceMax,\n            sliceIndex: this.mprSliceIndex[0]\n          });\n        } else if (index === 1) {\n          const sliceMax = this.props.files[0].image.columns;\n          this.setState({\n            sliceMax: sliceMax,\n            sliceIndex: this.mprSliceIndex[1]\n          });\n        } else if (index === 2) {\n          const sliceMax = this.props.files[0].image.rows;\n          this.setState({\n            sliceMax: sliceMax,\n            sliceIndex: this.mprSliceIndex[2]\n          });\n        }\n      }\n\n      const dcmViewer = this.getDcmViewerRef(index); //console.log('dcmViewer:', dcmViewer)\n\n      this.props.setActiveMeasurements(dcmViewer.measurements);\n      this.props.setActiveDcm({\n        image: dcmViewer.image,\n        element: dcmViewer.dicomImage,\n        isDicom: dcmViewer.isDicom\n      });\n    };\n\n    this.layoutGridTouch = index => {\n      if (!isMobile && index === this.props.activeDcmIndex) return;\n      this.mprSliceIndex[this.props.activeDcmIndex] = this.state.sliceIndex;\n      this.props.setActiveDcmIndex(index);\n\n      if (this.state.visibleMprOrthogonal) {\n        if (index === 0) {\n          const sliceMax = this.props.files === null ? 1 : this.props.files.length;\n          this.setState({\n            sliceMax: sliceMax,\n            sliceIndex: this.mprSliceIndex[0]\n          });\n        } else if (index === 1) {\n          const sliceMax = this.props.files[0].image.columns;\n          this.setState({\n            sliceMax: sliceMax,\n            sliceIndex: this.mprSliceIndex[1]\n          });\n        } else if (index === 2) {\n          const sliceMax = this.props.files[0].image.rows;\n          this.setState({\n            sliceMax: sliceMax,\n            sliceIndex: this.mprSliceIndex[2]\n          });\n        }\n      }\n\n      const dcmViewer = this.getDcmViewerRef(index);\n      this.props.setActiveMeasurements(dcmViewer.measurements);\n      this.props.setActiveDcm({\n        image: dcmViewer.image,\n        element: dcmViewer.dicomImage,\n        isDicom: dcmViewer.isDicom\n      });\n    };\n\n    this.buildLayoutGrid = () => {\n      let dicomviewers = [];\n\n      for (let i = 0; i < this.props.layout[0]; i++) {\n        for (let j = 0; j < this.props.layout[1]; j++) {\n          const styleLayoutGrid = {\n            border: this.props.layout[0] === 1 && this.props.layout[1] === 1 ? 'solid 1px #000000' : 'solid 1px #444444'\n          };\n          const index = i * 4 + j;\n          dicomviewers.push(React.createElement(\"div\", {\n            key: index,\n            style: styleLayoutGrid,\n            onClick: () => this.layoutGridClick(index),\n            onTouchStart: () => this.layoutGridTouch(index),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 919\n            },\n            __self: this\n          }, this.getDcmViewer(index)));\n        }\n      }\n\n      return React.createElement(\"div\", {\n        id: \"dicomviewer-grid\",\n        style: {\n          display: 'grid',\n          gridTemplateRows: `repeat(${this.props.layout[0]}, ${100 / this.props.layout[0]}%)`,\n          gridTemplateColumns: `repeat(${this.props.layout[1]}, ${100 / this.props.layout[1]}%)`,\n          height: '100%',\n          width: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 932\n        },\n        __self: this\n      }, dicomviewers);\n    };\n\n    this.getFileName = dcmViewer => {\n      return dcmViewer.filename;\n      /*if (dcmViewer.fsItem !== null) {\n        return dcmViewer.fsItem.name\n      } else if (dcmViewer.localfile !== null) {\n        return getFileNameCorrect(dcmViewer.localfile.name)\n      } else {\n        return dcmViewer.localurl.substring(dcmViewer.localurl.lastIndexOf('/')+1)\n      }*/\n    };\n\n    this.getStringVisiblePlane = () => {\n      if (this.state.visibleMprOrthogonal) return 'orthogonal';else if (this.state.visibleMprSagittal) return 'sagittal';else if (this.state.visibleMprAxial) return 'axial';else if (this.state.visibleMprCoronal) return 'coronal';\n    };\n\n    this.appBarTitle = (classes, isOpen, dcmViewer) => {\n      if (isMobile && !isTablet) {\n        if (isOpen) return null;else return React.createElement(Typography, {\n          variant: \"overline\",\n          className: classes.title,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 975\n          },\n          __self: this\n        }, React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 976\n          },\n          __self: this\n        }, \"U\"), \"niversal \", React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 976\n          },\n          __self: this\n        }, \"D\"), \"icom \", React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 976\n          },\n          __self: this\n        }, \"V\"), \"iewer\");\n      } else {\n        if (isOpen) {\n          const plane = this.getStringVisiblePlane();\n\n          if (this.state.sliceMax > 1 && this.mprPlane !== plane && this.mprPlane !== '') {\n            return React.createElement(Typography, {\n              variant: \"overline\",\n              className: classes.title,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 984\n              },\n              __self: this\n            }, 'MPR ' + plane);\n          }\n\n          return React.createElement(Typography, {\n            variant: \"overline\",\n            className: classes.title,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 990\n            },\n            __self: this\n          }, this.getFileName(dcmViewer));\n        } else if (this.props.dicomdir !== null) {\n          return React.createElement(Typography, {\n            variant: \"overline\",\n            className: classes.title,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 996\n            },\n            __self: this\n          }, this.props.dicomdir.dicomdir.webkitRelativePath);\n        } else return React.createElement(Typography, {\n          variant: \"overline\",\n          className: classes.title,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1002\n          },\n          __self: this\n        }, React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1003\n          },\n          __self: this\n        }, \"U\"), \"niversal \", React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1003\n          },\n          __self: this\n        }, \"D\"), \"icom \", React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1003\n          },\n          __self: this\n        }, \"V\"), \"iewer\");\n      }\n    };\n\n    this.getImageOrientationZ = image => {\n      const iop = image.data.string('x00200037').split('\\\\'); // Image Orientation Patient\n\n      let v = new Array(3).fill(0).map(() => new Array(3).fill(0));\n      v[0][0] = parseFloat(iop[0]); // the x direction cosines of the first row X\n\n      v[0][1] = parseFloat(iop[1]); // the y direction cosines of the first row X\n\n      v[0][2] = parseFloat(iop[2]); // the z direction cosines of the first row X\n\n      v[1][0] = parseFloat(iop[3]); // the x direction cosines of the first column Y\n\n      v[1][1] = parseFloat(iop[4]); // the y direction cosines of the first column Y\n\n      v[1][2] = parseFloat(iop[5]); // the z direction cosines of the first column Y\n      //console.log('getImageOrientationZ: ', v[1][2])\n\n      return v[1][2];\n    };\n\n    this.mprBuildVolume = () => {\n      if (this.volume.length > 0) return;\n      this.t0 = performance.now();\n      const files = this.props.files;\n      const xPixelSpacing = getPixelSpacing(files[0].image, 0);\n      const spacingBetweenSlice = getSpacingBetweenSlice(files[0].image);\n      const sliceThickness = getSliceThickness(files[0].image);\n      const length = files[0].image.getPixelData().length;\n      const sliceLocation = getSliceLocation(files[0].image);\n      this.volume = []; // see https://stackoverflow.com/questions/58412358/dicom-multiplanar-image-reconstruction\n\n      this.mprData.zDim = Math.round(files.length * spacingBetweenSlice / xPixelSpacing); //console.log('this.mprData.zDim: ', this.mprData.zDim)\n      //console.log('spacingBetweenSlice: ', spacingBetweenSlice)\n      //console.log('sliceThickness: ', sliceThickness)\n      //console.log('xPixelSpacing: ', xPixelSpacing)\n      //console.log('getSliceLocation: ', sliceLocation)\n      // If spacing between slices is less than slice thickness, the images are not optimal for 3D reconstruction.\n      // Try an alternative algorithm based on slice distance.\n\n      let zDimMethod2 = false;\n\n      if (spacingBetweenSlice < sliceThickness && sliceLocation === undefined) {\n        let max = 0;\n        let min = 0;\n\n        for (let i = 0; i < files.length; i++) {\n          if (files[i].sliceDistance > max) max = files[i].sliceDistance;\n          if (files[i].sliceDistance < min) min = files[i].sliceDistance;\n        }\n\n        this.mprData.zDim = Math.round(Math.abs(max - min) / xPixelSpacing); //console.log('method2, this.mprData.zDim: ', this.mprData.zDim)\n\n        zDimMethod2 = true;\n      }\n\n      if (files.length === this.mprData.zDim) {\n        // slices contiguous\n        for (let i = 0, len = files.length; i < len; i++) {\n          this.volume.push(files[i].image.getPixelData());\n        }\n      } else if (files.length < this.mprData.zDim) {\n        // gap between slices\n        let emptyPlane = new Int16Array(length).fill(0);\n\n        for (let i = 0, len = this.mprData.zDim; i < len; i++) {\n          this.volume.push(emptyPlane);\n        }\n\n        let order = [];\n\n        for (let i = 0; i < files.length; i++) {\n          order.push({\n            iFile: i,\n            instanceNumber: files[i].instanceNumber,\n            sliceDistance: files[i].sliceDistance,\n            sliceLocation: files[i].sliceLocation\n          });\n        }\n\n        if (zDimMethod2) {\n          // eliminate eventually duplicates\n          order = order.reduce((previous, current) => {\n            let object = previous.filter(object => object.sliceDistance === current.sliceDistance);\n\n            if (object.length === 0) {\n              previous.push(current);\n            }\n\n            return previous;\n          }, []);\n          order.sort((l, r) => {\n            // return r.sliceDistance - l.sliceDistance\n            return l.instanceNumber - r.instanceNumber;\n          }); //console.log('order: ', order)     \n        } else {\n          // const reorder = files[0].sliceDistance < files[1].sliceDistance\n          const reorder = files[0].sliceLocation < files[1].sliceLocation;\n\n          if (reorder) {\n            order.sort((l, r) => {\n              // return l.instanceNumber - r.instanceNumber\n              // return r.sliceDistance - l.sliceDistance\n              return r.sliceLocation - l.sliceLocation;\n            }); //console.log('reorder: ')     \n          }\n        }\n        /*if (this.getImageOrientationZ(files[0].image) < 0) {\n          order.sort((l, r) => {\n            return r.instanceNumber - l.instanceNumber\n            // return r.sliceDistance - l.sliceDistance\n          })     \n          console.log('reorder 2: ')        \n        }*/\n\n\n        let intervals = [0];\n        this.volume[0] = files[order[0].iFile].image.getPixelData();\n        this.volume[this.mprData.zDim - 1] = files[order[order.length - 1].iFile].image.getPixelData();\n        const step = (this.mprData.zDim - 2) / (order.length - 2);\n        let i = 0;\n\n        for (let k = 1; k <= order.length - 2; k++) {\n          i = Math.ceil(i + step); //console.log(`i: ${i},  k: ${k},  order[k].iFile: ${order[k].iFile}`)\n\n          this.volume[i] = files[order[k].iFile].image.getPixelData(); // order[k-1].iFile\n\n          intervals.push(i);\n        }\n\n        intervals.push(this.mprData.zDim - 1);\n        console.log('intervals: ', intervals); //console.log('this.volume: ', this.volume)\n\n        const interpolationMethod = getSettingsMprInterpolation();\n\n        if (interpolationMethod === 'no') {\n          // build missing planes without interpolation, simple duplicate\n          for (let i = 0; i < intervals.length - 1; i++) {\n            //console.log(`intervals: ${intervals[i]} - ${intervals[i+1]}`)\n            for (let j = intervals[i] + 1; j <= intervals[i + 1] - 1; j++) {\n              //console.log(`j: ${j}`)\n              this.volume[j] = this.volume[intervals[i + 1]];\n            }\n          }\n        } else if (interpolationMethod === 'weightedlinear') {\n          // build the interpolate planes between original planes\n          for (let i = 0; i < intervals.length - 1; i++) {\n            //console.log(`intervals: ${intervals[i]} - ${intervals[i+1]}`)\n            const step = intervals[i + 1] - intervals[i];\n\n            for (let j = intervals[i] + 1; j < intervals[i + 1]; j++) {\n              //console.log(`i: ${i}, intervals[i]: ${intervals[i]}, j: ${j}`)\n              let p = new Int16Array(length);\n              const w = (j - intervals[i]) / step;\n\n              for (let k = 0; k < length - 1; k++) {\n                // simple linear interpolation\n                // const p0 = this.volume[intervals[i]][k]\n                // const p1 = this.volume[intervals[i+1]][k]\n                // p[k] = (p0+p1)/2   \n                // weighted linear interpolation\n                const p0 = this.volume[intervals[i]][k] * (1 - w);\n                const p1 = this.volume[intervals[i + 1]][k] * w;\n                p[k] = p0 + p1;\n\n                if (p0 === undefined || p1 === undefined) {\n                  console.log('undefined');\n                } // weighted bilinear interpolation\n\n                /*if (k-1 > 0 && k+1 < length) {\n                  const p0 = this.volume[intervals[i]][k] * (1-w) * 0.5 + this.volume[intervals[i]][k-1] * (1-w) * 0.25 + this.volume[intervals[i]][k+1] * (1-w) * 0.25\n                  const p1 = this.volume[intervals[i+1]][k] * w * 0.5 + this.volume[intervals[i+1]][k-1] * w * 0.25 + this.volume[intervals[i+1]][k+1] * w * 0.25\n                  p[k] = p0+p1\n                } else if (k-1 < 0) {\n                  const p0 = this.volume[intervals[i]][k] * (1-w) * 0.75 + this.volume[intervals[i]][k+1] * (1-w) * 0.25\n                  const p1 = this.volume[intervals[i+1]][k] * w * 0.5 + this.volume[intervals[i+1]][k+1] * w * 0.25\n                  p[k] = p0+p1\n                } else { // k+1 > length \n                  const p0 = this.volume[intervals[i]][k] * (1-w) * 0.75 + this.volume[intervals[i]][k-1] * (1-w) * 0.25\n                  const p1 = this.volume[intervals[i+1]][k] * w * 0.5 + this.volume[intervals[i+1]][k-1] * w * 0.25\n                  p[k] = p0+p1\n                }*/\n\n              }\n\n              this.volume[j] = p;\n            }\n          }\n        }\n\n        this.t1 = performance.now();\n        console.log(`performance volume building: ${this.t1 - this.t0} milliseconds`);\n      } else {\n        // overlapping slices\n        this.mprData.zStep = files.length / this.mprData.zDim; //console.log('this.mprData.zStep: ', this.mprData.zStep)\n\n        for (let i = 0, len = this.mprData.zDim; i < len; i++) {\n          const k = Math.round(i * this.mprData.zStep);\n          this.volume.push(files[k].image.getPixelData());\n        }\n      }\n\n      if (this.state.visibleMprOrthogonal) {\n        this.changeToOrthogonalView();\n      } else if (this.state.visibleMprSagittal) {\n        this.changeToSagittalView();\n      } else if (this.state.visibleMprCoronal) {\n        this.changeToCoronalView();\n      } else {\n        // axial\n        this.changeToAxialView();\n      }\n    };\n\n    this.changeToOrthogonalView = () => {\n      this.changeLayout(1, 3);\n      this.setState({\n        visibleVolumeBuilding: false\n      }, () => {\n        const plane = this.mprPlanePosition();\n        const index = Math.round(this.props.files.length / 2);\n        if (this.dicomViewersRefs[0].volume === null) this.dicomViewersRefs[0].volume = this.volume;\n        this.mprSliceIndex[0] = index;\n        this.dicomViewersRefs[0].runTool('openimage', index);\n        if (this.dicomViewersRefs[1].volume === null) this.dicomViewersRefs[1].volume = this.volume;\n        const xzIndex = Math.round(this.props.files[0].image.columns / 2);\n        this.mprSliceIndex[1] = xzIndex;\n        this.dicomViewersRefs[1].mprRenderXZPlane(this.dicomViewersRefs[0].filename, plane, xzIndex, this.mprData);\n        if (this.dicomViewersRefs[2].volume === null) this.dicomViewersRefs[2].volume = this.volume;\n        const yzIndex = Math.round(this.props.files[0].image.rows / 2);\n        this.mprSliceIndex[2] = yzIndex;\n        this.dicomViewersRefs[2].mprRenderYZPlane(this.dicomViewersRefs[0].filename, plane, yzIndex, this.mprData);\n      });\n    };\n\n    this.changeToSagittalView = () => {\n      this.changeLayout(1, 1);\n      this.setState({\n        visibleVolumeBuilding: false\n      }, () => {\n        const plane = this.mprPlanePosition();\n        if (this.dicomViewersRefs[this.props.activeDcmIndex].volume === null) this.dicomViewersRefs[this.props.activeDcmIndex].volume = this.volume; //console.log('mprSagittal, this.mprPlanePosition(): ', plane)\n\n        if (plane === 'sagittal') {\n          const sliceMax = this.props.files === null ? 1 : this.props.files.length;\n          const index = Math.round(sliceMax / 2);\n          this.setState({\n            sliceIndex: index,\n            sliceMax: sliceMax\n          });\n          this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openimage', index);\n        } else if (plane === 'axial') {\n          const sliceMax = this.props.files[0].image.columns;\n          const index = Math.round(sliceMax / 2);\n          this.setState({\n            sliceIndex: index,\n            sliceMax: sliceMax\n          });\n          this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderYZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);\n        } else {\n          const sliceMax = this.props.files[0].image.rows;\n          const index = Math.round(sliceMax / 2);\n          this.setState({\n            sliceIndex: index,\n            sliceMax: sliceMax\n          });\n          this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderXZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);\n        }\n      });\n    };\n\n    this.changeToCoronalView = () => {\n      this.changeLayout(1, 1);\n      this.setState({\n        visibleVolumeBuilding: false\n      }, () => {\n        const plane = this.mprPlanePosition();\n        if (this.dicomViewersRefs[this.props.activeDcmIndex].volume === null) this.dicomViewersRefs[this.props.activeDcmIndex].volume = this.volume; //console.log('mprCoronal, this.mprPlanePosition(): ', plane)\n\n        if (plane === 'coronal') {\n          const sliceMax = this.props.files === null ? 1 : this.props.files.length;\n          const index = Math.round(sliceMax / 2);\n          this.setState({\n            sliceIndex: index,\n            sliceMax: sliceMax\n          });\n          this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openimage', index);\n        } else if (plane === 'axial') {\n          const sliceMax = this.props.files[0].image.columns;\n          const index = Math.round(sliceMax / 2);\n          this.setState({\n            sliceIndex: index,\n            sliceMax: sliceMax\n          });\n          this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderXZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);\n        } else {\n          // plane is sagittal\n          const sliceMax = this.props.files[0].image.rows;\n          const index = Math.round(sliceMax / 2);\n          this.setState({\n            sliceIndex: index,\n            sliceMax: sliceMax\n          });\n          this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderYZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);\n        }\n      });\n    };\n\n    this.changeToAxialView = () => {\n      this.changeLayout(1, 1);\n      this.setState({\n        visibleVolumeBuilding: false\n      }, () => {\n        const plane = this.mprPlanePosition();\n        if (this.dicomViewersRefs[this.props.activeDcmIndex].volume === null) this.dicomViewersRefs[this.props.activeDcmIndex].volume = this.volume; //console.log('mprAxial, this.mprPlanePosition(): ', plane)\n\n        if (plane === 'axial') {\n          const sliceMax = this.props.files === null ? 1 : this.props.files.length;\n          const index = Math.round(sliceMax / 2);\n          this.setState({\n            sliceIndex: index,\n            sliceMax: sliceMax\n          });\n          this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openimage', index);\n        } else if (plane === 'sagittal') {\n          const sliceMax = this.props.files[0].image.columns;\n          const index = Math.round(sliceMax / 2);\n          this.setState({\n            sliceIndex: index,\n            sliceMax: sliceMax\n          });\n          this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderXZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);\n        } else {\n          const sliceMax = this.props.files[0].image.rows;\n          const index = Math.round(sliceMax / 2);\n          this.setState({\n            sliceIndex: index,\n            sliceMax: sliceMax\n          });\n          this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderYZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);\n        }\n      });\n    };\n\n    this.mprPlanePosition = () => {\n      if (this.mprPlane === '') {\n        this.mprPlane = this.dicomViewersRefs[this.props.activeDcmIndex].mprPlanePosition();\n      }\n\n      return this.mprPlane;\n    };\n\n    this.mprOrthogonal = () => {\n      const visibleMprOrthogonal = this.state.visibleMprOrthogonal;\n\n      if (!visibleMprOrthogonal) {\n        const index = Math.round(this.props.files.length / 2); //console.log('mprOrthogonal, index: ', index)\n\n        this.setState({\n          sliceIndex: index\n        });\n        this.setState({\n          visibleMprOrthogonal: true,\n          visibleMprCoronal: false,\n          visibleMprSagittal: false,\n          visibleMprAxial: false\n        }, () => {\n          if (this.volume.length === 0) {\n            this.setState({\n              visibleVolumeBuilding: true\n            }, () => {\n              setTimeout(() => {\n                this.mprBuildVolume();\n              }, 100);\n            });\n          } else {\n            this.changeToOrthogonalView();\n          }\n        });\n      }\n    };\n\n    this.mprSagittal = () => {\n      const visibleMprSagittal = this.state.visibleMprSagittal;\n\n      if (!visibleMprSagittal) {\n        this.setState({\n          visibleMprOrthogonal: false,\n          visibleMprSagittal: true,\n          visibleMprCoronal: false,\n          visibleMprAxial: false\n        }, () => {\n          if (this.volume.length === 0) {\n            this.setState({\n              visibleVolumeBuilding: true\n            }, () => {\n              setTimeout(() => {\n                this.mprBuildVolume();\n              }, 100);\n            });\n          } else {\n            this.changeToSagittalView();\n          }\n        });\n      }\n    };\n\n    this.mprCoronal = () => {\n      const visibleMprCoronal = this.state.visibleMprCoronal;\n\n      if (!visibleMprCoronal) {\n        this.setState({\n          visibleMprOrthogonal: false,\n          visibleMprSagittal: false,\n          visibleMprCoronal: true,\n          visibleMprAxial: false\n        }, () => {\n          if (this.volume.length === 0) {\n            this.setState({\n              visibleVolumeBuilding: true\n            }, () => {\n              setTimeout(() => {\n                this.mprBuildVolume();\n              }, 100);\n            });\n          } else {\n            this.changeToCoronalView();\n          }\n        });\n      }\n    };\n\n    this.mprAxial = () => {\n      const visibleMprAxial = this.state.visibleMprAxial;\n\n      if (!visibleMprAxial) {\n        this.setState({\n          visibleMprOrthogonal: false,\n          visibleMprSagittal: false,\n          visibleMprCoronal: false,\n          visibleMprAxial: true\n        }, () => {\n          if (this.volume.length === 0) {\n            this.setState({\n              visibleVolumeBuilding: true\n            }, () => {\n              setTimeout(() => {\n                this.mprBuildVolume();\n              }, 100);\n            });\n          } else {\n            this.changeToAxialView();\n          }\n        });\n      }\n    };\n\n    this.listOpenFilesFirstFrame = () => {\n      const index = 0; //this.props.setLocalFileStore(this.files[index])\n\n      this.setState({\n        sliceIndex: index\n      }, () => {\n        this.handleOpenImage(index);\n      });\n    };\n\n    this.listOpenFilesPreviousFrame = () => {\n      let index = this.state.sliceIndex;\n      index = index === 0 ? this.state.sliceMax - 1 : index - 1; //this.props.setLocalFileStore(this.files[index])\n\n      this.setState({\n        sliceIndex: index\n      }, () => {\n        this.handleOpenImage(index);\n      });\n    };\n\n    this.listOpenFilesNextFrame = () => {\n      let index = this.state.sliceIndex;\n      index = index === this.state.sliceMax - 1 ? 0 : index + 1; //this.props.setLocalFileStore(this.files[index])\n\n      this.setState({\n        sliceIndex: index\n      }, () => {\n        this.handleOpenImage(index);\n      });\n    };\n\n    this.listOpenFilesLastFrame = () => {\n      const index = this.state.sliceMax - 1; //this.props.setLocalFileStore(this.files[index])\n\n      this.setState({\n        sliceIndex: index\n      }, () => {\n        this.handleOpenImage(index);\n      });\n    };\n\n    this.listOpenFilesScrolling = () => {\n      const scrolling = this.state.listOpenFilesScrolling;\n      this.setState({\n        listOpenFilesScrolling: !scrolling\n      }, () => {\n        if (scrolling) {\n          clearInterval(this.timerScrolling);\n        } else {\n          this.timerScrolling = setInterval(() => {\n            this.listOpenFilesNextFrame();\n          }, 500);\n        }\n      });\n    };\n\n    this.handleSliceChange = (event, value) => {\n      console.log('slice value: ', Math.floor(value));\n      this.setState({\n        sliceIndex: Math.floor(value)\n      }, () => {\n        let index = this.state.sliceIndex;\n        this.props.setLocalFileStore(this.files[index]);\n        this.handleOpenImage(index);\n      });\n    };\n\n    this.files = [];\n    this.file = null;\n    this.url = null;\n    this.mprData = {};\n    this.mprPlane = '';\n    this.volume = [];\n    this.mprSliceIndex = [0, 0, 0];\n    this.fileOpen = React.createRef();\n    this.showFileOpen = this.showFileOpen.bind(this);\n    this.openDicomdir = React.createRef();\n    this.showOpenDicomdir = this.showOpenDicomdir.bind(this);\n    this.openFolder = React.createRef();\n    this.showOpenFolder = this.showOpenFolder.bind(this);\n    this.openUrlField = React.createRef();\n    this.dicomViewersRefs = [];\n    this.dicomViewers = [];\n\n    for (let i = 0; i < 16; i++) {\n      this.dicomViewers.push(this.setDcmViewer(i));\n    }\n  }\n\n  showFileOpen() {\n    this.props.isOpenStore(false);\n    this.fileOpen.current.click();\n  }\n\n  showOpenFolder() {\n    this.openFolder.current.click();\n  }\n\n  showOpenDicomdir() {\n    this.openDicomdir.current.click();\n  }\n\n  handleOpenFolder(files) {\n    //console.log('handleOpenFolder: ', files)\n    for (let i = 0; i < files.length; i++) {\n      this.files.push(files[i]);\n    }\n\n    this.changeLayout(1, 1);\n    this.mprPlane = '';\n    this.volume = [];\n\n    for (let i = 0; i < 16; i++) if (this.dicomViewersRefs[i] !== undefined) {// this.dicomViewersRefs[i].runTool('clear')\n    }\n\n    this.setState({\n      sliceIndex: 0,\n      sliceMax: 1,\n      visibleMprOrthogonal: false,\n      visibleMprCoronal: false,\n      visibleMprSagittal: false,\n      visibleMprAxial: false\n    }, () => {\n      this.setState({\n        visibleOpenMultipleFilesDlg: true\n      });\n    });\n  }\n\n  handleOpenDicomdir(files) {\n    this.setState({\n      visibleDicomdir: false\n    }, () => {\n      let dicomdir = null;\n      let datafiles = [];\n\n      for (let i = 0; i < files.length; i++) {\n        if (files[i].webkitRelativePath.includes('DICOMDIR')) {\n          dicomdir = files[i];\n        } else {\n          datafiles.push(files[i]);\n        }\n      }\n\n      if (dicomdir !== null) {\n        this.props.setDicomdirStore({\n          origin: 'local',\n          dicomdir: dicomdir,\n          files: datafiles\n        });\n        this.toggleDicomdir();\n      }\n    });\n  }\n\n  componentDidMount() {\n    // Need to set the renderNode since the drawer uses an overlay\n    //this.dialog = document.getElementById('drawer-routing-example-dialog')\n    window.scrollTo(0, 0);\n  }\n\n  render() {\n    //console.log('App render: ')\n    const classes = this.props.classes;\n    const primaryClass = {\n      primary: classes.listItemText\n    };\n    const iconSize = '1.2rem';\n    const isOpen = this.props.isOpen[this.props.activeDcmIndex];\n    const isDicomdir = this.props.dicomdir !== null;\n    const isMultipleFiles = this.props.files === null ? false : this.props.files.length > 1;\n    const openMenu = this.state.openMenu;\n    const openImageEdit = this.state.openImageEdit;\n    const openTools = this.state.openTools;\n    const openMpr = this.state.openMpr && isMultipleFiles && this.mprPlane !== '';\n    const visibleMainMenu = this.state.visibleMainMenu;\n    const visibleHeader = this.state.visibleHeader;\n    const visibleSettings = this.state.visibleSettings;\n    const visibleAbout = this.state.visibleAbout;\n    const visibleMeasure = this.state.visibleMeasure;\n    const visibleToolbox = this.state.visibleToolbox;\n    const visibleDicomdir = this.state.visibleDicomdir;\n    const visibleFileManager = this.state.visibleFileManager;\n    const visibleClearMeasureDlg = this.state.visibleClearMeasureDlg;\n    const visibleZippedFileDlg = this.state.visibleZippedFileDlg;\n    const visibleDownloadZipDlg = this.state.visibleDownloadZipDlg;\n    const visibleOpenMultipleFilesDlg = this.state.visibleOpenMultipleFilesDlg;\n    const visibleLayout = Boolean(this.state.anchorElLayout);\n    const visibleVolumeBuilding = this.state.visibleVolumeBuilding;\n    const visibleMprOrthogonal = this.state.visibleMprOrthogonal;\n    const visibleMprCoronal = this.state.visibleMprCoronal;\n    const visibleMprSagittal = this.state.visibleMprSagittal;\n    const visibleMprAxial = this.state.visibleMprAxial;\n    let iconToolColor = this.state.toolState === 1 ? '#FFFFFF' : '#999999';\n    const dcmViewer = this.getActiveDcmViewer();\n    const sliceMax = this.state.sliceMax;\n    const anchorEl = this.state.anchorEl; //console.log('this.dicomViewersRefs: ', this.dicomViewersRefs)\n    //console.log('isMultipleFiles: ', isMultipleFiles)    \n    //console.log('this.mprPlane: ', this.mprPlane) \n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1549\n      },\n      __self: this\n    }, React.createElement(AppBar, {\n      className: classes.appBar,\n      position: \"static\",\n      elevation: 0,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1550\n      },\n      __self: this\n    }, React.createElement(Toolbar, {\n      variant: \"dense\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1551\n      },\n      __self: this\n    }, React.createElement(IconButton, {\n      edge: \"start\",\n      className: classes.menuButton,\n      color: \"inherit\",\n      \"aria-label\": \"menu\",\n      onClick: this.toggleMainMenu,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1552\n      },\n      __self: this\n    }, React.createElement(MenuIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1554\n      },\n      __self: this\n    })), React.createElement(Tooltip, {\n      title: \"File Manager\",\n      arrow: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1557\n      },\n      __self: this\n    }, React.createElement(IconButton, {\n      button: true,\n      onClick: () => this.toggleFileManager(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1558\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiFileCabinet,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1559\n      },\n      __self: this\n    }))), React.createElement(Tooltip, {\n      title: \"Open\",\n      arrow: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1562\n      },\n      __self: this\n    }, React.createElement(IconButton, {\n      button: true,\n      onClick: event => this.toggleOpenMenu(event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1563\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiFolderMultiple,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1564\n      },\n      __self: this\n    }), openMenu ? React.createElement(ExpandLess, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1565\n      },\n      __self: this\n    }) : React.createElement(ExpandMore, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1565\n      },\n      __self: this\n    }))), React.createElement(Popper, {\n      open: openMenu,\n      anchorEl: anchorEl,\n      role: undefined,\n      transition: true,\n      disablePortal: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1568\n      },\n      __self: this\n    }, ({\n      TransitionProps,\n      placement\n    }) => React.createElement(Grow, Object.assign({}, TransitionProps, {\n      style: {\n        transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1570\n      },\n      __self: this\n    }), React.createElement(Paper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1574\n      },\n      __self: this\n    }, React.createElement(ClickAwayListener, {\n      onClickAway: event => this.toggleOpenMenu(event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1575\n      },\n      __self: this\n    }, React.createElement(MenuList, {\n      autoFocusItem: openMenu,\n      id: \"menu-list-grow\",\n      onKeyDown: event => this.toggleOpenMenu(event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1576\n      },\n      __self: this\n    }, React.createElement(MenuItem, {\n      button: true,\n      style: {\n        paddingLeft: 30\n      },\n      onClick: () => this.showFileOpen(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1578\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1579\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiFolder,\n      size: '1.0rem',\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1579\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: React.createElement(Typography, {\n        type: \"body1\",\n        style: {\n          fontSize: '0.80em',\n          marginLeft: '-20px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1582\n        },\n        __self: this\n      }, \"File\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1580\n      },\n      __self: this\n    })), React.createElement(MenuItem, {\n      onClick: event => this.toggleOpenMenu(event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1586\n      },\n      __self: this\n    }, \"Profile\"), React.createElement(MenuItem, {\n      onClick: event => this.toggleOpenMenu(event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1587\n      },\n      __self: this\n    }, \"My account\"), React.createElement(MenuItem, {\n      onClick: event => this.toggleOpenMenu(event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1588\n      },\n      __self: this\n    }, \"Logout\")))))), React.createElement(Tooltip, {\n      title: \"Clear All\",\n      arrow: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1596\n      },\n      __self: this\n    }, React.createElement(IconButton, {\n      button: true,\n      onClick: () => this.clear(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1597\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiDelete,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1598\n      },\n      __self: this\n    }))), React.createElement(Tooltip, {\n      title: \"Layout\",\n      arrow: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1601\n      },\n      __self: this\n    }, React.createElement(IconButton, {\n      button: true,\n      onClick: this.handleLayout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1602\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiViewGridPlusOutline,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1603\n      },\n      __self: this\n    }))), React.createElement(Tooltip, {\n      title: \"Settings\",\n      arrow: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1606\n      },\n      __self: this\n    }, React.createElement(IconButton, {\n      button: true,\n      onClick: () => this.showSettings(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1607\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiSettings,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1608\n      },\n      __self: this\n    }))), this.appBarTitle(classes, isOpen, dcmViewer), React.createElement(\"div\", {\n      className: classes.grow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1615\n      },\n      __self: this\n    }), !isOpen && !isDicomdir ? React.createElement(IconButton, {\n      onClick: this.showAbout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1617\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiInformationOutline,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1618\n      },\n      __self: this\n    })) : null, iconTool !== null && this.props.tool !== null && isOpen ? React.createElement(IconButton, {\n      onClick: this.toolChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1623\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: iconTool,\n      size: iconSize,\n      color: iconToolColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1624\n      },\n      __self: this\n    })) : null, isOpen && dcmViewer.numberOfFrames > 1 && isOpen ? React.createElement(IconButton, {\n      onClick: this.cinePlayer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1629\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiVideo,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1630\n      },\n      __self: this\n    })) : null, isOpen ? React.createElement(IconButton, {\n      onClick: this.resetImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1635\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiRefresh,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1636\n      },\n      __self: this\n    })) : null, isOpen ? React.createElement(IconButton, {\n      color: \"inherit\",\n      onClick: this.saveShot,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1641\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiCamera,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1642\n      },\n      __self: this\n    })) : null, isOpen ? React.createElement(IconButton, {\n      color: \"inherit\",\n      onClick: this.toggleToolbox,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1647\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiToolbox,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1648\n      },\n      __self: this\n    })) : null, isOpen ? React.createElement(IconButton, {\n      color: \"inherit\",\n      onClick: this.toggleMeasure,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1653\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiFileCad,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1654\n      },\n      __self: this\n    })) : null, isOpen && dcmViewer.isDicom ? React.createElement(IconButton, {\n      color: \"inherit\",\n      onClick: this.toggleHeader,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1659\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiFileDocument,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1660\n      },\n      __self: this\n    })) : null, isDicomdir ? React.createElement(IconButton, {\n      color: \"inherit\",\n      onClick: this.toggleDicomdir,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1665\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiFolderOpen,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1666\n      },\n      __self: this\n    })) : null, isOpen ? React.createElement(IconButton, {\n      color: \"inherit\",\n      onClick: this.toggleFileManager,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1671\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiFileCabinet,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1672\n      },\n      __self: this\n    })) : null)), React.createElement(Drawer, {\n      variant: \"persistent\",\n      open: visibleMainMenu,\n      style: {\n        position: 'relative',\n        zIndex: 1\n      },\n      onClose: this.toggleMainMenu,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1679\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: classes.toolbar,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1685\n      },\n      __self: this\n    }, React.createElement(List, {\n      dense: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1686\n      },\n      __self: this\n    }, React.createElement(ListItem, {\n      button: true,\n      onClick: () => this.showAppBar(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1687\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1688\n      },\n      __self: this\n    }, React.createElement(MenuIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1688\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      primary: \"Tool Bar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1689\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      button: true,\n      onClick: () => this.toggleFileManager(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1691\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1692\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiFileCabinet,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1692\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: \"File Manager\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1693\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      button: true,\n      onClick: () => this.toggleOpenMenu(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1696\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1697\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiFolderMultiple,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1697\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: \"Open ...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1698\n      },\n      __self: this\n    }), openMenu ? React.createElement(ExpandLess, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1699\n      },\n      __self: this\n    }) : React.createElement(ExpandMore, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1699\n      },\n      __self: this\n    })), React.createElement(Collapse, {\n      in: openMenu,\n      timeout: \"auto\",\n      unmountOnExit: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1701\n      },\n      __self: this\n    }, React.createElement(List, {\n      dense: true,\n      component: \"div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1702\n      },\n      __self: this\n    }, React.createElement(ListItem, {\n      button: true,\n      style: {\n        paddingLeft: 30\n      },\n      onClick: () => this.showFileOpen(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1703\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1704\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiFolder,\n      size: '1.0rem',\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1704\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: React.createElement(Typography, {\n        type: \"body1\",\n        style: {\n          fontSize: '0.80em',\n          marginLeft: '-20px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1707\n        },\n        __self: this\n      }, \"File\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1705\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      button: true,\n      style: {\n        paddingLeft: 30\n      },\n      onClick: () => this.showOpenUrl(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1711\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1712\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiWeb,\n      size: '1.0rem',\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1712\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: React.createElement(Typography, {\n        type: \"body1\",\n        style: {\n          fontSize: '0.80em',\n          marginLeft: '-20px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1715\n        },\n        __self: this\n      }, \"URL\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1713\n      },\n      __self: this\n    })), isInputDirSupported() && !isMobile ? React.createElement(ListItem, {\n      button: true,\n      style: {\n        paddingLeft: 30\n      },\n      onClick: () => this.showOpenFolder(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1720\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1721\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiFolderOpen,\n      size: '1.0rem',\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1721\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: React.createElement(Typography, {\n        type: \"body1\",\n        style: {\n          fontSize: '0.80em',\n          marginLeft: '-20px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1724\n        },\n        __self: this\n      }, \"Folder\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1722\n      },\n      __self: this\n    })) : null, isInputDirSupported() && !isMobile ? React.createElement(ListItem, {\n      button: true,\n      style: {\n        paddingLeft: 30\n      },\n      onClick: () => this.showOpenDicomdir(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1730\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1731\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiFolderOpen,\n      size: '1.0rem',\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1731\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: React.createElement(Typography, {\n        type: \"body1\",\n        style: {\n          fontSize: '0.80em',\n          marginLeft: '-20px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1734\n        },\n        __self: this\n      }, \"DICOMDIR\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1732\n      },\n      __self: this\n    })) : null)), React.createElement(ListItem, {\n      button: true,\n      onClick: () => this.clear(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1744\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1745\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiDelete,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1745\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: \"Clear All\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1746\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      button: true,\n      onClick: this.handleLayout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1748\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1749\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiViewGridPlusOutline,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1749\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: \"Layout\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1750\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      button: true,\n      onClick: () => this.showSettings(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1752\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1753\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiSettings,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1753\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: \"Settings\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1754\n      },\n      __self: this\n    })), React.createElement(Divider, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1756\n      },\n      __self: this\n    }), React.createElement(ListItem, {\n      button: true,\n      onClick: () => this.toggleToolbox(),\n      disabled: !isOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1757\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1758\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiChartHistogram,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1758\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: \"Histogram\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1759\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      button: true,\n      onClick: () => this.toggleMpr(),\n      disabled: !isOpen || !isMultipleFiles || this.mprPlane === '',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1761\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1763\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiAxisArrow,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1763\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: \"MPR\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1764\n      },\n      __self: this\n    }), openMpr ? React.createElement(ExpandLess, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1765\n      },\n      __self: this\n    }) : React.createElement(ExpandMore, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1765\n      },\n      __self: this\n    })), React.createElement(Collapse, {\n      in: openMpr,\n      timeout: \"auto\",\n      unmountOnExit: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1767\n      },\n      __self: this\n    }, React.createElement(List, {\n      dense: true,\n      component: \"div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1768\n      },\n      __self: this\n    }, React.createElement(ListItem, {\n      button: true,\n      style: {\n        paddingLeft: 40\n      },\n      onClick: () => this.mprOrthogonal(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1769\n      },\n      __self: this\n    }, visibleMprOrthogonal ? React.createElement(ListItemIcon, {\n      style: {\n        marginLeft: '-10px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1771\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiCheck,\n      size: '1.0rem',\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1771\n      },\n      __self: this\n    })) : null, React.createElement(ListItemText, {\n      style: visibleMprOrthogonal ? {\n        marginLeft: '-7px'\n      } : {\n        marginLeft: '40px'\n      },\n      classes: primaryClass,\n      primary: React.createElement(Typography, {\n        type: \"body1\",\n        style: {\n          fontSize: '0.80em',\n          marginLeft: '-23px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1777\n        },\n        __self: this\n      }, \"Orthogonal\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1773\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      button: true,\n      style: {\n        paddingLeft: 40\n      },\n      onClick: () => this.mprCoronal(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1781\n      },\n      __self: this\n    }, visibleMprCoronal ? React.createElement(ListItemIcon, {\n      style: {\n        marginLeft: '-10px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1783\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiCheck,\n      size: '1.0rem',\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1783\n      },\n      __self: this\n    })) : null, React.createElement(ListItemText, {\n      style: visibleMprCoronal ? {\n        marginLeft: '-7px'\n      } : {\n        marginLeft: '40px'\n      },\n      classes: primaryClass,\n      primary: React.createElement(Typography, {\n        type: \"body1\",\n        style: {\n          fontSize: '0.80em',\n          marginLeft: '-23px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1789\n        },\n        __self: this\n      }, \"Coronal\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1785\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      button: true,\n      style: {\n        paddingLeft: 40\n      },\n      onClick: () => this.mprSagittal(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1792\n      },\n      __self: this\n    }, visibleMprSagittal ? React.createElement(ListItemIcon, {\n      style: {\n        marginLeft: '-10px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1794\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiCheck,\n      size: '1.0rem',\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1794\n      },\n      __self: this\n    })) : null, React.createElement(ListItemText, {\n      style: visibleMprSagittal ? {\n        marginLeft: '-7px'\n      } : {\n        marginLeft: '40px'\n      },\n      classes: primaryClass,\n      primary: React.createElement(Typography, {\n        type: \"body1\",\n        style: {\n          fontSize: '0.80em',\n          marginLeft: '-23px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1800\n        },\n        __self: this\n      }, \"Sagittal\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1796\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      button: true,\n      style: {\n        paddingLeft: 40\n      },\n      onClick: () => this.mprAxial(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1803\n      },\n      __self: this\n    }, visibleMprAxial ? React.createElement(ListItemIcon, {\n      style: {\n        marginLeft: '-10px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1804\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiCheck,\n      size: '1.0rem',\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1804\n      },\n      __self: this\n    })) : null, React.createElement(ListItemText, {\n      style: visibleMprAxial ? {\n        marginLeft: '-7px'\n      } : {\n        marginLeft: '40px'\n      },\n      classes: primaryClass,\n      primary: React.createElement(Typography, {\n        type: \"body1\",\n        style: {\n          fontSize: '0.80em',\n          marginLeft: '-23px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1810\n        },\n        __self: this\n      }, \"Axial\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1806\n      },\n      __self: this\n    })))), React.createElement(ListItem, {\n      button: true,\n      onClick: () => this.toggleImageEdit(),\n      disabled: !isOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1815\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1816\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiImageEdit,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1816\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: \"Edit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1817\n      },\n      __self: this\n    }), openImageEdit ? React.createElement(ExpandLess, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1818\n      },\n      __self: this\n    }) : React.createElement(ExpandMore, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1818\n      },\n      __self: this\n    })), React.createElement(Collapse, {\n      in: openImageEdit,\n      timeout: \"auto\",\n      unmountOnExit: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1820\n      },\n      __self: this\n    }, React.createElement(List, {\n      dense: true,\n      component: \"div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1821\n      },\n      __self: this\n    }, React.createElement(ListItem, {\n      button: true,\n      style: {\n        paddingLeft: 30\n      },\n      onClick: () => this.toolExecute('Invert'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1822\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1823\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiInvertColors,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1823\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: \"Invert\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1824\n      },\n      __self: this\n    })))), React.createElement(ListItem, {\n      button: true,\n      onClick: () => this.toggleTools(),\n      disabled: !isOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1828\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1829\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiTools,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1829\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: \"Tools\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1830\n      },\n      __self: this\n    }), openTools ? React.createElement(ExpandLess, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1831\n      },\n      __self: this\n    }) : React.createElement(ExpandMore, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1831\n      },\n      __self: this\n    })), React.createElement(Collapse, {\n      in: openTools,\n      timeout: \"auto\",\n      unmountOnExit: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1833\n      },\n      __self: this\n    }, React.createElement(List, {\n      dense: true,\n      component: \"div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1834\n      },\n      __self: this\n    }, React.createElement(ListItem, {\n      button: true,\n      style: {\n        paddingLeft: 30\n      },\n      onClick: () => this.toolExecute('notool'),\n      disabled: !isOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1835\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1837\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiCursorDefault,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1837\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: \"No tool\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1838\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      button: true,\n      style: {\n        paddingLeft: 30\n      },\n      onClick: () => this.toolExecute('Wwwc'),\n      disabled: !isOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1840\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1842\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiArrowAll,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1842\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: \"WW/WC\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1843\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      button: true,\n      style: {\n        paddingLeft: 30\n      },\n      onClick: () => this.toolExecute('Pan'),\n      disabled: !isOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1845\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1846\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiCursorPointer,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1846\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: \"Pan\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1847\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      button: true,\n      style: {\n        paddingLeft: 30\n      },\n      onClick: () => this.toolExecute('Zoom'),\n      disabled: !isOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1849\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1851\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiMagnify,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1851\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: \"Zoom\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1852\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      button: true,\n      style: {\n        paddingLeft: 30\n      },\n      onClick: () => this.toolExecute('Magnify'),\n      disabled: !isOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1854\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1856\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiCheckboxIntermediate,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1856\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: \"Magnify\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1858\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      button: true,\n      style: {\n        paddingLeft: 30\n      },\n      onClick: () => this.toolExecute('Length'),\n      disabled: !isOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1860\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1862\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiRuler,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1862\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: \"Length\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1863\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      button: true,\n      style: {\n        paddingLeft: 30\n      },\n      onClick: () => this.toolExecute('Probe'),\n      disabled: !isOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1865\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1867\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiEyedropper,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1867\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: \"Probe\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1868\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      button: true,\n      style: {\n        paddingLeft: 30\n      },\n      onClick: () => this.toolExecute('Angle'),\n      disabled: !isOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1870\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1872\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiAngleAcute,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1872\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: \"Angle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1873\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      button: true,\n      style: {\n        paddingLeft: 30\n      },\n      onClick: () => this.toolExecute('EllipticalRoi'),\n      disabled: !isOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1875\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1877\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiEllipse,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1877\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: \"Elliptical Roi\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1878\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      button: true,\n      style: {\n        paddingLeft: 30\n      },\n      onClick: () => this.toolExecute('RectangleRoi'),\n      disabled: !isOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1880\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1882\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiRectangle,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1882\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: \"Rectangle Roi\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1883\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      button: true,\n      style: {\n        paddingLeft: 30\n      },\n      onClick: () => this.toolExecute('FreehandRoi'),\n      disabled: !isOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1885\n      },\n      __self: this\n    }, React.createElement(ListItemIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1887\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiGesture,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1887\n      },\n      __self: this\n    })), React.createElement(ListItemText, {\n      classes: primaryClass,\n      primary: \"Freehand Roi\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1888\n      },\n      __self: this\n    }))))), isMultipleFiles ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1896\n      },\n      __self: this\n    }, React.createElement(Divider, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1897\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1898\n      },\n      __self: this\n    }, React.createElement(IconButton, {\n      onClick: this.listOpenFilesFirstFrame,\n      size: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1899\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiSkipBackward,\n      size: '1.0rem',\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1900\n      },\n      __self: this\n    })), React.createElement(IconButton, {\n      onClick: this.listOpenFilesPreviousFrame,\n      size: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1902\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiSkipPrevious,\n      size: '1.0rem',\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1903\n      },\n      __self: this\n    })), React.createElement(IconButton, {\n      onClick: this.listOpenFilesScrolling,\n      size: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1905\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: this.state.listOpenFilesScrolling ? mdiPause : mdiPlay,\n      size: '1.0rem',\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1906\n      },\n      __self: this\n    })), React.createElement(IconButton, {\n      onClick: this.listOpenFilesNextFrame,\n      size: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1909\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiSkipNext,\n      size: '1.0rem',\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1910\n      },\n      __self: this\n    })), React.createElement(IconButton, {\n      onClick: this.listOpenFilesLastFrame,\n      size: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1912\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiSkipForward,\n      size: '1.0rem',\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1913\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1916\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      type: \"body1\",\n      style: {\n        fontSize: '0.80em'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1917\n      },\n      __self: this\n    }, `${this.state.sliceIndex + 1} / ${sliceMax}`)), React.createElement(\"div\", {\n      style: {\n        width: '130px',\n        margin: 'auto'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1920\n      },\n      __self: this\n    }, React.createElement(Slider, {\n      style: {\n        marginTop: '-4px'\n      },\n      value: this.state.sliceIndex,\n      onChange: this.handleSliceChange,\n      color: \"secondary\",\n      min: 0,\n      max: sliceMax - 1,\n      step: 100 / sliceMax,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1921\n      },\n      __self: this\n    }))) : null)), React.createElement(Drawer, {\n      variant: \"persistent\",\n      anchor: \"right\",\n      open: visibleHeader,\n      onClose: this.toggleHeader,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1937\n      },\n      __self: this\n    }, visibleHeader ? React.createElement(DicomHeader, {\n      dcmViewer: dcmViewer,\n      classes: classes,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1943\n      },\n      __self: this\n    }) : null), React.createElement(Drawer, {\n      variant: \"persistent\",\n      anchor: \"right\",\n      open: visibleMeasure,\n      onClose: this.toggleMeasure,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1946\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        marginTop: '48px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1952\n      },\n      __self: this\n    }, React.createElement(Toolbar, {\n      variant: \"dense\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1953\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"subtitle1\",\n      className: classes.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1954\n      },\n      __self: this\n    }, \"Measurements\\xA0\\xA0\"), React.createElement(\"div\", {\n      className: classes.grow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1957\n      },\n      __self: this\n    }), React.createElement(IconButton, {\n      color: \"inherit\",\n      onClick: this.saveMeasure,\n      edge: \"end\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1958\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiContentSaveOutline,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1959\n      },\n      __self: this\n    })), React.createElement(IconButton, {\n      color: \"inherit\",\n      onClick: this.clearMeasure,\n      edge: \"end\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1961\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      path: mdiTrashCanOutline,\n      size: iconSize,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1962\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1965\n      },\n      __self: this\n    }, isOpen ? React.createElement(Measurements, {\n      dcmViewer: dcmViewer,\n      toolRemove: this.toolRemove,\n      classes: classes,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1966\n      },\n      __self: this\n    }) : null))), React.createElement(Drawer, {\n      variant: \"persistent\",\n      anchor: \"right\",\n      open: visibleToolbox,\n      onClose: this.toggleToolbox,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1971\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        marginTop: '48px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1977\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1978\n      },\n      __self: this\n    }, isOpen ? React.createElement(Histogram, {\n      key: this.getFileName(dcmViewer),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1979\n      },\n      __self: this\n    }) : null))), React.createElement(Drawer, {\n      variant: \"persistent\",\n      anchor: getSettingsDicomdirView(),\n      open: visibleDicomdir,\n      onClose: this.toggleDicomdir,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1984\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1990\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1991\n      },\n      __self: this\n    }, visibleDicomdir ? React.createElement(Dicomdir, {\n      onOpenFile: this.handleOpenFileDicomdir,\n      onOpenFs: this.handleOpenSandboxFs,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1993\n      },\n      __self: this\n    }) : null))), React.createElement(Drawer, {\n      variant: \"persistent\",\n      anchor: getSettingsFsView(),\n      open: visibleFileManager,\n      onClose: this.toggleFileManager,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1998\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2004\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2005\n      },\n      __self: this\n    }, visibleFileManager ? React.createElement(FsUI, {\n      onOpen: this.handleOpenSandboxFs,\n      onOpenImage: this.handleOpenImage,\n      onOpenMultipleFilesCompleted: this.openMultipleFilesCompleted,\n      onOpenDicomdir: this.handleOpenFsDicomdir,\n      color: iconColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2007\n      },\n      __self: this\n    }) : null))), visibleSettings ? React.createElement(Settings, {\n      onClose: this.hideSettings,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2019\n      },\n      __self: this\n    }) : null, visibleAbout ? React.createElement(AboutDlg, {\n      onClose: this.showAbout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2021\n      },\n      __self: this\n    }) : null, visibleDownloadZipDlg ? React.createElement(DownloadZipDlg, {\n      onClose: this.hideDownloadZipDlg,\n      url: this.url,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2023\n      },\n      __self: this\n    }) : null, visibleOpenMultipleFilesDlg ? React.createElement(OpenMultipleFilesDlg, {\n      onClose: this.hideOpenMultipleFilesDlg,\n      files: this.files,\n      origin: 'local',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2026\n      },\n      __self: this\n    }) : null, React.createElement(Dialog, {\n      open: visibleClearMeasureDlg,\n      onClose: this.hideClearMeasureDlg,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2028\n      },\n      __self: this\n    }, React.createElement(DialogTitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2032\n      },\n      __self: this\n    }, \"Are you sure to remove all the measurements?\"), React.createElement(DialogActions, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2033\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.hideClearMeasureDlg,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2034\n      },\n      __self: this\n    }, \"Cancel\"), React.createElement(Button, {\n      onClick: this.confirmClearMeasureDlg,\n      autoFocus: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2037\n      },\n      __self: this\n    }, \"Ok\"))), React.createElement(Dialog, {\n      open: visibleZippedFileDlg,\n      onClose: this.hideZippedFileDlg,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2043\n      },\n      __self: this\n    }, React.createElement(DialogTitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2047\n      },\n      __self: this\n    }, \"This is a zipped file, would you import into sandbox file system?\"), React.createElement(DialogActions, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2048\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.hideZippedFileDlg,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2049\n      },\n      __self: this\n    }, \"Cancel\"), React.createElement(Button, {\n      onClick: this.confirmZippedFileDlg,\n      autoFocus: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2052\n      },\n      __self: this\n    }, \"Ok\"))), React.createElement(Dialog, {\n      open: this.state.visibleOpenUrl,\n      \"aria-labelledby\": \"form-dialog-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2058\n      },\n      __self: this\n    }, React.createElement(DialogTitle, {\n      id: \"form-dialog-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2062\n      },\n      __self: this\n    }, \"Open URL\"), React.createElement(DialogContent, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2063\n      },\n      __self: this\n    }, React.createElement(DialogContentText, {\n      id: \"alert-dialog-description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2064\n      },\n      __self: this\n    }, \"Insert an URL to download a DICOM or image file:\"), React.createElement(TextField, {\n      autoFocus: true,\n      margin: \"dense\",\n      id: \"id-open-url\",\n      inputRef: input => this.openUrlField = input,\n      fullWidth: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2067\n      },\n      __self: this\n    })), React.createElement(DialogActions, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2075\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: () => this.hideOpenUrl(false),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2076\n      },\n      __self: this\n    }, \"Cancel\"), React.createElement(Button, {\n      onClick: () => this.hideOpenUrl(true),\n      autoFocus: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2079\n      },\n      __self: this\n    }, \"Ok\"))), React.createElement(Popover, {\n      id: 'id-layout',\n      open: visibleLayout,\n      anchorEl: this.state.anchorElLayout,\n      onClose: this.closeLayout,\n      anchorOrigin: {\n        vertical: 'center',\n        horizontal: 'right'\n      },\n      transformOrigin: {\n        vertical: 'center',\n        horizontal: 'left'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2085\n      },\n      __self: this\n    }, React.createElement(LayoutTool, {\n      row: this.props.layout[0] - 1,\n      col: this.props.layout[1] - 1,\n      onChange: this.changeLayout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2099\n      },\n      __self: this\n    })), React.createElement(Snackbar, {\n      anchorOrigin: {\n        vertical: 'top',\n        horizontal: 'center'\n      },\n      open: visibleVolumeBuilding,\n      autoHideDuration: 6000,\n      message: \"Volume building, wait please ...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2106\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        height: 'calc(100vh - 48px)'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2116\n      },\n      __self: this\n    }, this.buildLayoutGrid()), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2120\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"file\",\n      id: \"file_open\",\n      style: {\n        display: \"none\"\n      },\n      ref: this.fileOpen,\n      onChange: e => this.handleOpenLocalFs(e.target.files),\n      multiple: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2121\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2131\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"file\",\n      id: \"file_dicomdir\",\n      style: {\n        display: \"none\"\n      },\n      ref: this.openDicomdir,\n      onChange: e => this.handleOpenDicomdir(e.target.files),\n      webkitdirectory: \"\",\n      mozdirectory: \"\",\n      directory: \"\",\n      multiple: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2132\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2142\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"file\",\n      id: \"file_folder\",\n      style: {\n        display: \"none\"\n      },\n      ref: this.openFolder,\n      onChange: e => this.handleOpenFolder(e.target.files),\n      webkitdirectory: \"\",\n      mozdirectory: \"\",\n      directory: \"\",\n      multiple: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 2143\n      },\n      __self: this\n    })));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    localFileStore: state.localFileStore,\n    files: state.files,\n    isOpen: state.isOpen,\n    tool: state.tool,\n    activeDcmIndex: state.activeDcmIndex,\n    measurements: state.measurements,\n    layout: state.layout,\n    dicomdir: state.dicomdir,\n    fsZippedFile: state.fsZippedFile\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    clearingStore: () => dispatch(clearStore()),\n    setLocalFileStore: file => dispatch(localFileStore(file)),\n    toolStore: tool => dispatch(dcmTool(tool)),\n    isOpenStore: value => dispatch(dcmIsOpen(value)),\n    setActiveDcm: dcm => dispatch(activeDcm(dcm)),\n    setActiveDcmIndex: index => dispatch(activeDcmIndex(index)),\n    setActiveMeasurements: measurements => dispatch(activeMeasurements(measurements)),\n    setLayoutStore: (row, col) => dispatch(setLayout(row, col)),\n    setDicomdirStore: dicomdir => dispatch(setDicomdir(dicomdir)),\n    setFsZippedFile: file => dispatch(setZippedFile(file)),\n    setVolumeStore: file => dispatch(setVolume(file)),\n    setFilesStore: files => dispatch(filesStore(files))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(App));","map":{"version":3,"sources":["E:/private/projects/udv/u-dicom-viewer-master-1/u-dicom-viewer-master/src/App.js"],"names":["React","PureComponent","withStyles","connect","Dicomdir","DicomViewer","DicomHeader","Measurements","Settings","AboutDlg","Histogram","LayoutTool","FsUI","DownloadZipDlg","OpenMultipleFilesDlg","AppBar","Collapse","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Divider","Drawer","ExpandLess","ExpandMore","Icon","IconButton","List","ListItem","ListItemIcon","ListItemText","MenuIcon","Popover","Slider","Snackbar","TextField","Toolbar","Typography","isMobile","isTablet","clearStore","localFileStore","dcmIsOpen","activeDcm","activeDcmIndex","activeMeasurements","setLayout","dcmTool","setDicomdir","setZippedFile","setVolume","filesStore","log","getPixelSpacing","getSpacingBetweenSlice","getSliceThickness","getSliceLocation","getFileExtReal","isInputDirSupported","getSettingsFsView","getSettingsDicomdirView","getSettingsMprInterpolation","mdiAngleAcute","mdiArrowAll","mdiAxisArrow","mdiCamera","mdiChartHistogram","mdiCheck","mdiCheckboxIntermediate","mdiContentSaveOutline","mdiCursorDefault","mdiCursorPointer","mdiDelete","mdiEllipse","mdiEyedropper","mdiFileCabinet","mdiFileDocument","mdiFileCad","mdiFolder","mdiFolderMultiple","mdiGesture","mdiViewGridPlusOutline","mdiImageEdit","mdiInformationOutline","mdiInvertColors","mdiMagnify","mdiFolderOpen","mdiRefresh","mdiRectangle","mdiRuler","mdiSettings","mdiToolbox","mdiTools","mdiTrashCanOutline","mdiVideo","mdiWeb","mdiPlay","mdiPause","mdiSkipBackward","mdiSkipForward","mdiSkipNext","mdiSkipPrevious","Tooltip","MenuItem","Menu","Popper","Grow","Paper","ClickAwayListener","MenuList","drawerWidth","iconColor","iconTool","styles","theme","body","backgroundColor","palette","common","black","grow","flexGrow","root","display","menuButton","marginRight","spacing","title","appBar","position","zIndex","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","width","enteringScreen","hide","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","breakpoints","up","toolbar","mixins","content","padding","listItemText","fontSize","App","constructor","props","state","anchorElLayout","openMenu","openImageEdit","openTools","openMpr","visibleMainMenu","visibleHeader","visibleSettings","visibleToolbar","visibleOpenUrl","visibleToolbox","visibleMeasure","visibleClearMeasureDlg","visibleAbout","visibleDicomdir","visibleFileManager","visibleZippedFileDlg","visibleDownloadZipDlg","visibleOpenMultipleFilesDlg","toolState","sliceIndex","sliceMax","listOpenFilesScrolling","visibleVolumeBuilding","visibleMprOrthogonal","visibleMprCoronal","visibleMprSagittal","visibleMprAxial","anchorEl","setDcmViewer","index","ref","dicomViewersRefs","runTool","changeTool","getDcmViewerRef","getDcmViewer","dicomViewers","getActiveDcmViewer","toggleFileManager","setState","handleOpenLocalFs","filesSelected","length","files","changeLayout","mprPlane","volume","i","undefined","file","type","url","setLocalFileStore","handleOpenSandboxFs","fsItem","handleOpenImage","plane","mprPlanePosition","mprRenderXZPlane","filename","mprData","mprRenderYZPlane","handleOpenFileDicomdir","handleOpenFsDicomdir","setDicomdirStore","origin","dicomdir","toggleDicomdir","showAppBar","window","scrollTo","toggleMainMenu","showMainMenu","hideMainMenu","handleVisibility","toggleHeader","visible","toggleToolbox","saveMeasure","toggleMeasure","hideMeasure","handleVisibilityMeasure","console","clearMeasure","showClearMeasureDlg","hideClearMeasureDlg","confirmClearMeasureDlg","showZippedFileDlg","hideZippedFileDlg","confirmZippedFileDlg","setFsZippedFile","showAbout","showSettings","hideSettings","handleVisibilitySettings","hideDownloadZipDlg","hideOpenMultipleFilesDlg","openMultipleFilesCompleted","showOpenUrl","hideOpenUrl","openDlg","openUrlField","value","downloadOpenUrl","resetImage","saveShot","cinePlayer","clear","setFilesStore","clearingStore","handleLayout","event","currentTarget","closeLayout","row","col","layout","layoutGridClick","j","setLayoutStore","toolExecute","tool","toolStore","toolChange","toolRemove","toggleOpenMenu","toggleImageEdit","toggleTools","toggleMpr","mprSliceIndex","setActiveDcmIndex","image","columns","rows","dcmViewer","setActiveMeasurements","measurements","setActiveDcm","element","dicomImage","isDicom","layoutGridTouch","buildLayoutGrid","dicomviewers","styleLayoutGrid","border","push","gridTemplateRows","gridTemplateColumns","height","getFileName","getStringVisiblePlane","appBarTitle","classes","isOpen","webkitRelativePath","getImageOrientationZ","iop","data","string","split","v","Array","fill","map","parseFloat","mprBuildVolume","t0","performance","now","xPixelSpacing","spacingBetweenSlice","sliceThickness","getPixelData","sliceLocation","zDim","Math","round","zDimMethod2","max","min","sliceDistance","abs","len","emptyPlane","Int16Array","order","iFile","instanceNumber","reduce","previous","current","object","filter","sort","l","r","reorder","intervals","step","k","ceil","interpolationMethod","p","w","p0","p1","t1","zStep","changeToOrthogonalView","changeToSagittalView","changeToCoronalView","changeToAxialView","xzIndex","yzIndex","mprOrthogonal","setTimeout","mprSagittal","mprCoronal","mprAxial","listOpenFilesFirstFrame","listOpenFilesPreviousFrame","listOpenFilesNextFrame","listOpenFilesLastFrame","scrolling","clearInterval","timerScrolling","setInterval","handleSliceChange","floor","fileOpen","createRef","showFileOpen","bind","openDicomdir","showOpenDicomdir","openFolder","showOpenFolder","isOpenStore","click","handleOpenFolder","handleOpenDicomdir","datafiles","includes","componentDidMount","render","primaryClass","primary","iconSize","isDicomdir","isMultipleFiles","visibleLayout","Boolean","iconToolColor","TransitionProps","placement","transformOrigin","paddingLeft","numberOfFrames","textAlign","margin","marginTop","input","vertical","horizontal","e","target","mapStateToProps","fsZippedFile","mapDispatchToProps","dispatch","dcm","setVolumeStore"],"mappings":"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","sourcesContent":["import React, {PureComponent} from 'react'\nimport {withStyles} from '@material-ui/core/styles'\nimport {connect} from 'react-redux'\nimport Dicomdir from './components/Dicomdir'\nimport DicomViewer from './components/DicomViewer'\nimport DicomHeader from './components/DicomHeader'\nimport Measurements from './components/Measurements'\nimport Settings from './components/Settings'\nimport AboutDlg from './components/AboutDlg'\nimport Histogram from './components/Histogram'\nimport LayoutTool from './components/LayoutTool'\nimport FsUI from './components/FsUI'\nimport DownloadZipDlg from './components/DownloadZipDlg'\nimport OpenMultipleFilesDlg from './components/OpenMultipleFilesDlg'\nimport AppBar from '@material-ui/core/AppBar'\nimport Collapse from '@material-ui/core/Collapse'\nimport Button from '@material-ui/core/Button'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport Divider from '@material-ui/core/Divider'\nimport Drawer from '@material-ui/core/Drawer'\nimport ExpandLess from '@material-ui/icons/ExpandLess'\nimport ExpandMore from '@material-ui/icons/ExpandMore'\nimport Icon from '@mdi/react'\nimport IconButton from '@material-ui/core/IconButton'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport Popover from '@material-ui/core/Popover'\nimport Slider from '@material-ui/core/Slider'\nimport Snackbar from '@material-ui/core/Snackbar'\nimport TextField from '@material-ui/core/TextField'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport Typography from '@material-ui/core/Typography'\n//import { FixedSizeList } from 'react-window'\n//import {List as ListVirtual} from 'react-virtualized'\nimport {\n  isMobile,\n  isTablet,\n} from 'react-device-detect'\nimport {\n  clearStore,\n  localFileStore,\n  dcmIsOpen,\n  activeDcm,\n  activeDcmIndex,\n  activeMeasurements,\n  setLayout,\n  dcmTool,\n  setDicomdir,\n  setZippedFile,\n  setVolume,\n  filesStore,\n} from './actions/index'\nimport {\n  log,\n  getPixelSpacing,\n  getSpacingBetweenSlice,\n  getSliceThickness,\n  getSliceLocation,\n  //getFileNameCorrect,\n  getFileExtReal,\n  isInputDirSupported,\n  getSettingsFsView,\n  getSettingsDicomdirView,\n  getSettingsMprInterpolation,\n} from './functions'\nimport {\n  mdiAngleAcute,\n  mdiArrowAll,\n  mdiAxisArrow,\n  mdiCamera,\n  mdiChartHistogram,\n  mdiCheck,\n  mdiCheckboxIntermediate,\n  mdiContentSaveOutline,\n  mdiCursorDefault,\n  mdiCursorPointer,\n  mdiDelete,\n  mdiEllipse,\n  mdiEyedropper,\n  mdiFileCabinet,\n  mdiFileDocument,\n  mdiFileCad,\n  mdiFolder,\n  mdiFolderMultiple,\n  mdiGesture,\n  mdiViewGridPlusOutline,\n  mdiImageEdit,\n  mdiInformationOutline,\n  mdiInvertColors,\n  mdiMagnify,\n  mdiFolderOpen,\n  mdiRefresh,\n  mdiRectangle,\n  mdiRuler,\n  mdiSettings,\n  mdiToolbox,\n  mdiTools,\n  mdiTrashCanOutline,\n  mdiVideo,\n  mdiWeb,\n\n  mdiPlay,\n  mdiPause,\n  mdiSkipBackward,\n  mdiSkipForward,\n  mdiSkipNext,\n  mdiSkipPrevious,\n} from '@mdi/js'\n\nimport './App.css'\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\nimport Popper from \"@material-ui/core/Popper\";\nimport Grow from \"@material-ui/core/Grow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport MenuList from \"@material-ui/core/MenuList\";\n\nlog();\n\n//localStorage.setItem(\"debug\", \"cornerstoneTools\")\n\nconst drawerWidth = 240;\nconst iconColor = '#FFFFFF';\nlet iconTool = null;\n\nconst styles = theme => ({\n  '@global': {\n    body: {\n      backgroundColor: theme.palette.common.black,\n    },\n  },\n\n  grow: {\n    flexGrow: 1,\n  },\n\n  root: {\n    display: 'flex',\n  },\n\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n\n  title: {\n    flexGrow: 1,\n  },\n\n  appBar: {\n    position: 'relative',\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n\n  hide: {\n    display: 'none',\n  },\n\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n    whiteSpace: 'nowrap',\n  },\n\n  drawerOpen: {\n    width: drawerWidth,\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n\n  drawerClose: {\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    overflowX: 'hidden',\n    width: theme.spacing(7) + 1,\n    [theme.breakpoints.up('sm')]: {\n      width: theme.spacing(9) + 1,\n    },\n  },\n\n  // Loads information about the app bar, including app bar height\n  toolbar: theme.mixins.toolbar,\n\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n  },\n\n  listItemText: {\n    fontSize: '0.85em',\n    marginLeft: '-20px'\n  },\n\n});\n\nclass App extends PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.files = [];\n    this.file = null;\n    this.url = null;\n\n    this.mprData = {};\n    this.mprPlane = '';\n\n    this.volume = [];\n    this.mprSliceIndex = [0, 0, 0];\n\n    this.fileOpen = React.createRef();\n    this.showFileOpen = this.showFileOpen.bind(this);\n\n    this.openDicomdir = React.createRef();\n    this.showOpenDicomdir = this.showOpenDicomdir.bind(this);\n\n    this.openFolder = React.createRef();\n    this.showOpenFolder = this.showOpenFolder.bind(this);\n\n    this.openUrlField = React.createRef();\n\n    this.dicomViewersRefs = [];\n    this.dicomViewers = [];\n    for (let i = 0; i < 16; i++) {\n      this.dicomViewers.push(this.setDcmViewer(i))\n    }\n  }\n\n  state = {\n    anchorElLayout: null,\n    openMenu: false,\n    openImageEdit: false,\n    openTools: false,\n    openMpr: false,\n    visibleMainMenu: true,\n    visibleHeader: false,\n    visibleSettings: false,\n    visibleToolbar: true,\n    visibleOpenUrl: false,\n    visibleToolbox: false,\n    visibleMeasure: false,\n    visibleClearMeasureDlg: false,\n    visibleAbout: false,\n    visibleDicomdir: false,\n    visibleFileManager: false,\n    visibleZippedFileDlg: false,\n    visibleDownloadZipDlg: false,\n    visibleOpenMultipleFilesDlg: false,\n    toolState: 1,\n    sliceIndex: 0,\n    sliceMax: 1,\n    listOpenFilesScrolling: false,\n    visibleVolumeBuilding: false,\n    visibleMprOrthogonal: false,\n    visibleMprCoronal: false,\n    visibleMprSagittal: false,\n    visibleMprAxial: false,\n\n    anchorEl: null,\n  };\n\n  setDcmViewer = (index) => {\n    return (\n      <DicomViewer\n        dcmRef={(ref) => {\n          this.dicomViewersRefs[index] = ref\n        }}\n        index={index}\n        runTool={ref => (this.runTool = ref)}\n        changeTool={ref => (this.changeTool = ref)}\n      />\n    )\n  };\n\n  getDcmViewerRef = (index) => {\n    return this.dicomViewersRefs[index]\n  };\n\n  getDcmViewer = (index) => {\n    return this.dicomViewers[index]\n  };\n\n  getActiveDcmViewer = () => {\n    return this.dicomViewersRefs[this.props.activeDcmIndex]\n  };\n\n  toggleFileManager = () => {\n    if (getSettingsFsView() === 'left') {\n      this.setState({visibleMainMenu: false, visibleFileManager: !this.state.visibleFileManager})\n    } else {\n      this.setState({visibleFileManager: !this.state.visibleFileManager})\n    }\n  };\n\n  showFileOpen() {\n    this.props.isOpenStore(false);\n    this.fileOpen.current.click()\n  }\n\n  handleOpenLocalFs = (filesSelected) => {\n    //console.log('handleOpenLocalFs: ', filesSelected)\n    if (filesSelected.length > 1) {\n      this.files = filesSelected;\n      this.changeLayout(1, 1);\n      this.mprPlane = '';\n      this.volume = [];\n      for (let i = 0; i < 16; i++)\n        if (this.dicomViewersRefs[i] !== undefined) {\n          // this.dicomViewersRefs[i].runTool('clear')\n        }\n      this.setState({\n        sliceIndex: 0,\n        sliceMax: 1,\n        visibleMprOrthogonal: false,\n        visibleMprCoronal: false,\n        visibleMprSagittal: false,\n        visibleMprAxial: false\n      }, () => {\n        this.setState({visibleOpenMultipleFilesDlg: true})\n      })\n    } else {\n      const file = filesSelected[0];\n      //console.log('file: ', file)\n      if (file.type === 'application/x-zip-compressed' || file.type === 'application/zip') {\n        this.file = file;\n        this.url = null;\n        this.setState({visibleZippedFileDlg: true})\n      } else {\n        this.setState({sliceIndex: 0, sliceMax: 1});\n        this.props.setLocalFileStore(file);\n        this.dicomViewersRefs[this.props.activeDcmIndex].runTool('clear');\n        this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openLocalFs', file)\n      }\n    }\n  };\n\n  handleOpenSandboxFs = (fsItem) => {\n    //this.hideMainMenu()\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool('clear');\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openSandboxFs', fsItem)\n  };\n\n  handleOpenImage = (index) => {\n    //console.log('handleOpenImage : ', index)\n    const visibleMprOrthogonal = this.state.visibleMprOrthogonal;\n    const visibleMprSagittal = this.state.visibleMprSagittal;\n    const visibleMprCoronal = this.state.visibleMprCoronal;\n    const visibleMprAxial = this.state.visibleMprAxial;\n    const plane = this.mprPlanePosition();\n    //console.log('plane: ', plane)\n\n    if (visibleMprOrthogonal) {\n      if (this.props.activeDcmIndex === 0) {\n        this.dicomViewersRefs[0].runTool('openimage', index)\n\n      } else if (this.props.activeDcmIndex === 1) {\n        if (plane === 'sagittal') { // then open axial plane in second view\n          this.dicomViewersRefs[1].mprRenderXZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData)\n        } else if (plane === 'axial') { // then open coronal plane in second view\n          this.dicomViewersRefs[1].mprRenderXZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData)\n        } else { // plane is coronal, then open axial in second view\n          this.dicomViewersRefs[1].mprRenderXZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData)\n        }\n\n      } else if (this.props.activeDcmIndex === 2) {\n        if (plane === 'sagittal') { // then open axial plane in second view\n          this.dicomViewersRefs[2].mprRenderYZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData)\n        } else if (plane === 'axial') { // then open coronal plane in second view\n          this.dicomViewersRefs[2].mprRenderYZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData)\n        } else { // plane is coronal, then open axial in second view\n          this.dicomViewersRefs[2].mprRenderYZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData)\n        }\n      }\n\n    } else if ((plane === 'sagittal' && visibleMprSagittal) ||\n      (plane === 'axial' && visibleMprAxial) ||\n      (plane === 'coronal' && visibleMprCoronal))\n      this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openimage', index);\n    else if (plane === 'sagittal' && visibleMprAxial)\n      this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderXZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);\n    else if (plane === 'sagittal' && visibleMprCoronal)\n      this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderYZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);\n    else if (plane === 'axial' && visibleMprSagittal)\n      this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderYZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);\n    else if (plane === 'axial' && visibleMprCoronal)\n      this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderXZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);\n    else if (plane === 'coronal' && visibleMprSagittal)\n      this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderYZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);\n    else if (plane === 'coronal' && visibleMprAxial)\n      this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderXZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData);\n    else // it's not a possible MPR, then open as normal dicom file  \n      this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openimage', index)\n  };\n\n  /*\n    handleOpenMprXZImage = (index) => {\n      this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderXZPlane(this.mprPlanePosition(), index)\n    }\n\n    handleOpenMprYZImage = (index) => {\n      this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderYZPlane(this.mprPlanePosition(), index)\n    }\n  */\n  handleOpenFileDicomdir = (file) => {\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool('clear');\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openLocalFs', file)\n  };\n\n  showOpenFolder() {\n    this.openFolder.current.click()\n  }\n\n  showOpenDicomdir() {\n    this.openDicomdir.current.click()\n  }\n\n  handleOpenFolder(files) {\n    //console.log('handleOpenFolder: ', files)\n    for (let i = 0; i < files.length; i++) {\n      this.files.push(files[i])\n    }\n    this.changeLayout(1, 1);\n    this.mprPlane = '';\n    this.volume = [];\n    for (let i = 0; i < 16; i++)\n      if (this.dicomViewersRefs[i] !== undefined) {\n        // this.dicomViewersRefs[i].runTool('clear')\n      }\n    this.setState({\n      sliceIndex: 0,\n      sliceMax: 1,\n      visibleMprOrthogonal: false,\n      visibleMprCoronal: false,\n      visibleMprSagittal: false,\n      visibleMprAxial: false\n    }, () => {\n      this.setState({visibleOpenMultipleFilesDlg: true})\n    })\n  }\n\n  handleOpenDicomdir(files) {\n    this.setState({visibleDicomdir: false}, () => {\n      let dicomdir = null;\n      let datafiles = [];\n      for (let i = 0; i < files.length; i++) {\n        if (files[i].webkitRelativePath.includes('DICOMDIR')) {\n          dicomdir = files[i]\n        } else {\n          datafiles.push(files[i])\n        }\n      }\n      if (dicomdir !== null) {\n        this.props.setDicomdirStore({origin: 'local', dicomdir: dicomdir, files: datafiles});\n        this.toggleDicomdir()\n      }\n    })\n  }\n\n  handleOpenFsDicomdir = (fsItem) => {\n    this.props.setDicomdirStore({origin: 'fs', dicomdir: fsItem, files: []});\n    this.toggleDicomdir()\n  };\n\n  componentDidMount() {\n    // Need to set the renderNode since the drawer uses an overlay\n    //this.dialog = document.getElementById('drawer-routing-example-dialog')\n    window.scrollTo(0, 0)\n  }\n\n\n  showAppBar = () => {\n    window.scrollTo(0, 0)\n  };\n\n\n  toggleMainMenu = () => {\n    const visibleMainMenu = this.state.visibleMainMenu;\n    //const visibleFileManager = this.state.visibleFileManager\n    if (getSettingsFsView() === 'left') {\n      this.setState({visibleMainMenu: !visibleMainMenu, visibleFileManager: false})\n    } else {\n      this.setState({visibleMainMenu: !visibleMainMenu})\n    }\n  };\n\n  showMainMenu = () => {\n    this.setState({visibleMainMenu: true})\n  };\n\n  hideMainMenu = () => {\n    this.setState({visibleMainMenu: false})\n  };\n\n  handleVisibility = (visibleMainMenu) => {\n    this.setState({visibleMainMenu})\n  };\n\n\n  toggleHeader = () => {\n    const visible = !this.state.visibleHeader;\n    this.setState({visibleHeader: visible});\n    if (visible)\n      this.setState({\n        visibleMeasure: false,\n        visibleToolbox: false,\n        visibleDicomdir: false,\n        visibleFileManager: false\n      })\n  };\n\n\n  toggleToolbox = () => {\n    const visible = !this.state.visibleToolbox;\n    this.setState({visibleToolbox: visible});\n    if (visible)\n      this.setState({\n        visibleMeasure: false,\n        visibleHeader: false,\n        visibleDicomdir: false,\n        visibleFileManager: false\n      })\n  };\n\n  saveMeasure = () => {\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool('savetools')\n  };\n\n  toggleMeasure = () => {\n    const visible = !this.state.visibleMeasure;\n    this.setState({visibleMeasure: visible});\n    if (visible)\n      this.setState({\n        visibleToolbox: false,\n        visibleHeader: false,\n        visibleDicomdir: false,\n        visibleFileManager: false\n      })\n  };\n\n  hideMeasure = () => {\n    this.setState({visibleMeasure: false})\n  };\n\n  handleVisibilityMeasure = (visibleMeasure) => {\n    this.setState({visibleMeasure})\n  };\n\n\n  toggleDicomdir = () => {\n    const visible = !this.state.visibleDicomdir;\n    console.log('toggleDicomdir: ', visible);\n    this.setState({visibleDicomdir: visible});\n    if (visible)\n      this.setState({\n        visibleMeasure: false,\n        visibleToolbox: false,\n        visibleHeader: false,\n        visibleFileManager: false\n      })\n  };\n\n\n  clearMeasure = () => {\n    this.showClearMeasureDlg()\n  };\n\n  showClearMeasureDlg = () => {\n    this.setState({visibleClearMeasureDlg: true})\n  };\n\n  hideClearMeasureDlg = () => {\n    this.setState({visibleClearMeasureDlg: false})\n  };\n\n  confirmClearMeasureDlg = () => {\n    this.hideClearMeasureDlg();\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool('removetools')\n  };\n\n\n  showZippedFileDlg = () => {\n    this.setState({visibleZippedFileDlg: true})\n  };\n\n  hideZippedFileDlg = () => {\n    this.setState({visibleZippedFileDlg: false})\n  };\n\n  confirmZippedFileDlg = () => {\n    this.hideZippedFileDlg();\n    this.setState({visibleFileManager: true}, () => {\n      console.log('this.url: ', this.url);\n      if (this.url !== null) {\n        this.setState({visibleDownloadZipDlg: true})\n      } else {\n        this.props.setFsZippedFile(this.file)\n      }\n    })\n  };\n\n\n  showAbout = () => {\n    this.setState({visibleAbout: !this.state.visibleAbout})\n  };\n\n  showSettings = () => {\n    this.setState({\n      visibleMainMenu: false,\n      visibleSettings: true,\n      visibleToolbar: false,\n      position: 'right'\n    })\n  };\n\n  hideSettings = () => {\n    this.setState({\n      visibleMainMenu: true,\n      visibleSettings: false,\n      visibleToolbar: true,\n      visibleFileManager: false,\n      visibleDicomdir: false,\n    })\n  };\n\n  handleVisibilitySettings = (visibleSettings) => {\n    this.setState({visibleSettings})\n  };\n\n  hideDownloadZipDlg = () => {\n    this.setState({visibleDownloadZipDlg: false})\n  };\n\n  hideOpenMultipleFilesDlg = () => {\n    this.setState({visibleOpenMultipleFilesDlg: false});\n    this.openMultipleFilesCompleted()\n  };\n\n  openMultipleFilesCompleted = () => {\n    if (this.props.files !== null) {\n      this.changeLayout(1, 1);\n      this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openimage', 0);\n      const sliceMax = this.props.files.length;\n      this.setState({sliceMax: sliceMax}, () => {\n        this.mprPlanePosition();\n        if (this.mprPlane === 'sagittal')\n          this.setState({\n            visibleMprOrthogonal: false,\n            visibleMprSagittal: true,\n            visibleMprAxial: false,\n            visibleMprCoronal: false\n          });\n        else if (this.mprPlane === 'coronal')\n          this.setState({\n            visibleMprOrthogonal: false,\n            visibleMprSagittal: false,\n            visibleMprAxial: false,\n            visibleMprCoronal: true\n          });\n        else\n          this.setState({\n            visibleMprOrthogonal: false,\n            visibleMprSagittal: false,\n            visibleMprAxial: true,\n            visibleMprCoronal: false\n          })\n      })\n    }\n  };\n\n  showOpenUrl = () => {\n    this.setState({visibleOpenUrl: true})\n  };\n\n  hideOpenUrl = (openDlg) => {\n    this.setState({visibleOpenUrl: false},\n      () => {\n        if (openDlg) {\n          this.hideMainMenu();\n          this.file = null;\n          this.url = this.openUrlField.value;\n          //console.log('this.url :', this.url)\n          //const ext = getFileExtReal(this.url)\n          //console.log('ext :', ext)\n          if (getFileExtReal(this.url) === 'zip') {\n            this.setState({visibleZippedFileDlg: true})\n          } else {\n            return this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openurl', this.openUrlField.value)\n          }\n        }\n      })\n  };\n\n  downloadOpenUrl = () => {\n    this.setState({visibleOpenUrl: false, visibleToolbar: true})\n  };\n\n  resetImage = () => {\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool('reset')\n  };\n\n  saveShot = () => {\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool('saveas')\n  };\n\n  cinePlayer = () => {\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool('cine')\n  };\n\n  clear = () => {\n    this.setState({\n      openImageEdit: false,\n      openTools: false,\n      openMpr: false,\n      visibleToolbox: false,\n      visibleMeasure: false,\n      visibleHeader: false,\n      visibleDicomdir: false\n    });\n    this.changeLayout(1, 1);\n    this.props.setFilesStore(null);\n    this.props.setDicomdirStore(null);\n    this.props.clearingStore();\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool('clear')\n  };\n\n  handleLayout = (event) => {\n    this.setState({anchorElLayout: event.currentTarget})\n  };\n\n  closeLayout = () => {\n    this.setState({anchorElLayout: null})\n  };\n\n  changeLayout = (row, col) => {\n    // if reduce the grid clear the unused views\n    if (row < this.props.layout[0] || col < this.props.layout[1]) {\n      this.layoutGridClick(0);\n      for (let i = 0; i < 4; i++) {\n        for (let j = 0; j < 4; j++) {\n          if ((i + 1 > row) || (j + 1 > col)) {\n            const index = i * 4 + j;\n            if (this.dicomViewersRefs[index] !== undefined) {\n              //this.dicomViewersRefs[index].runTool('clear')\n            }\n          }\n        }\n      }\n    }\n    this.props.setLayoutStore(row, col)\n  };\n\n  toolExecute = (tool) => {\n    this.hideMainMenu();\n    switch (tool) {\n      case 'notool':\n        iconTool = null;\n        this.setState({toolState: null});\n        break;\n      case 'Wwwc':\n        iconTool = mdiArrowAll;\n        break;\n      case 'Pan':\n        iconTool = mdiCursorPointer;\n        break;\n      case 'Zoom':\n        iconTool = mdiMagnify;\n        break;\n      case 'Length':\n        iconTool = mdiRuler;\n        break;\n      case 'Probe':\n        iconTool = mdiEyedropper;\n        break;\n      case 'Angle':\n        iconTool = mdiAngleAcute;\n        break;\n      case 'EllipticalRoi':\n        iconTool = mdiEllipse;\n        break;\n      case 'RectangleRoi':\n        iconTool = mdiRectangle;\n        break;\n      case 'FreehandRoi':\n        iconTool = mdiGesture;\n        break;\n\n      default:\n        break\n    }\n    this.props.toolStore(tool);\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool(tool)\n  };\n\n  toolChange = () => {\n    const toolState = 1 - this.state.toolState;\n    this.setState({toolState: toolState}, () => {\n      this.changeTool.changeTool(this.props.tool, toolState)\n    })\n  };\n\n  toolRemove = (index) => {\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool('removetool', index)\n  };\n\n  toggleOpenMenu = (event) => {\n    if (this.state.openMenu) {\n      this.setState({\n        openMenu: !this.state.openMenu,\n        anchorEl: null,\n      });\n    } else {\n      this.setState({\n        openMenu: !this.state.openMenu,\n        anchorEl: event.currentTarget,\n      });\n    }\n  };\n\n  toggleImageEdit = () => {\n    this.setState({openImageEdit: !this.state.openImageEdit})\n  };\n\n  toggleTools = () => {\n    this.setState({openTools: !this.state.openTools})\n  };\n\n  toggleMpr = () => {\n    this.setState({openMpr: !this.state.openMpr})\n  };\n\n  layoutGridClick = (index) => {\n    if (isMobile && index === this.props.activeDcmIndex) return;\n\n    this.mprSliceIndex[this.props.activeDcmIndex] = this.state.sliceIndex;\n\n    this.props.setActiveDcmIndex(index);\n\n    if (this.state.visibleMprOrthogonal) {\n      if (index === 0) {\n        const sliceMax = this.props.files === null ? 1 : this.props.files.length;\n        this.setState({sliceMax: sliceMax, sliceIndex: this.mprSliceIndex[0]})\n\n      } else if (index === 1) {\n        const sliceMax = this.props.files[0].image.columns;\n        this.setState({sliceMax: sliceMax, sliceIndex: this.mprSliceIndex[1]})\n\n      } else if (index === 2) {\n        const sliceMax = this.props.files[0].image.rows;\n        this.setState({sliceMax: sliceMax, sliceIndex: this.mprSliceIndex[2]})\n      }\n    }\n\n    const dcmViewer = this.getDcmViewerRef(index);\n    //console.log('dcmViewer:', dcmViewer)\n    this.props.setActiveMeasurements(dcmViewer.measurements);\n    this.props.setActiveDcm({image: dcmViewer.image, element: dcmViewer.dicomImage, isDicom: dcmViewer.isDicom})\n  };\n\n  layoutGridTouch = (index) => {\n    if (!isMobile && index === this.props.activeDcmIndex) return;\n\n    this.mprSliceIndex[this.props.activeDcmIndex] = this.state.sliceIndex;\n\n    this.props.setActiveDcmIndex(index);\n\n    if (this.state.visibleMprOrthogonal) {\n      if (index === 0) {\n        const sliceMax = this.props.files === null ? 1 : this.props.files.length;\n        this.setState({sliceMax: sliceMax, sliceIndex: this.mprSliceIndex[0]})\n\n      } else if (index === 1) {\n        const sliceMax = this.props.files[0].image.columns;\n        this.setState({sliceMax: sliceMax, sliceIndex: this.mprSliceIndex[1]})\n\n      } else if (index === 2) {\n        const sliceMax = this.props.files[0].image.rows;\n        this.setState({sliceMax: sliceMax, sliceIndex: this.mprSliceIndex[2]})\n      }\n    }\n\n    const dcmViewer = this.getDcmViewerRef(index);\n    this.props.setActiveMeasurements(dcmViewer.measurements);\n    this.props.setActiveDcm({image: dcmViewer.image, element: dcmViewer.dicomImage, isDicom: dcmViewer.isDicom})\n  };\n\n  buildLayoutGrid = () => {\n    let dicomviewers = [];\n    for (let i = 0; i < this.props.layout[0]; i++) {\n      for (let j = 0; j < this.props.layout[1]; j++) {\n        const styleLayoutGrid = {\n          border: this.props.layout[0] === 1 && this.props.layout[1] === 1 ? 'solid 1px #000000' : 'solid 1px #444444',\n        };\n        const index = i * 4 + j;\n        dicomviewers.push(\n          <div\n            key={index}\n            style={styleLayoutGrid}\n            onClick={() => this.layoutGridClick(index)}\n            onTouchStart={() => this.layoutGridTouch(index)}\n          >\n            {this.getDcmViewer(index)}\n          </div>\n        )\n      }\n    }\n\n    return (\n      <div\n        id=\"dicomviewer-grid\"\n        style={{\n          display: 'grid',\n          gridTemplateRows: `repeat(${this.props.layout[0]}, ${100 / this.props.layout[0]}%)`,\n          gridTemplateColumns: `repeat(${this.props.layout[1]}, ${100 / this.props.layout[1]}%)`,\n          height: '100%',\n          width: '100%',\n        }}\n      >\n        {dicomviewers}\n      </div>\n    )\n  };\n\n  getFileName = (dcmViewer) => {\n    return dcmViewer.filename\n    /*if (dcmViewer.fsItem !== null) {\n      return dcmViewer.fsItem.name\n    } else if (dcmViewer.localfile !== null) {\n      return getFileNameCorrect(dcmViewer.localfile.name)\n    } else {\n      return dcmViewer.localurl.substring(dcmViewer.localurl.lastIndexOf('/')+1)\n    }*/\n  };\n\n  getStringVisiblePlane = () => {\n    if (this.state.visibleMprOrthogonal)\n      return 'orthogonal';\n    else if (this.state.visibleMprSagittal)\n      return 'sagittal';\n    else if (this.state.visibleMprAxial)\n      return 'axial';\n    else if (this.state.visibleMprCoronal)\n      return 'coronal'\n  };\n\n  appBarTitle = (classes, isOpen, dcmViewer) => {\n    if (isMobile && !isTablet) {\n      if (isOpen)\n        return null;\n      else\n        return (\n          <Typography variant=\"overline\" className={classes.title}>\n            <strong>U</strong>niversal <strong>D</strong>icom <strong>V</strong>iewer\n          </Typography>\n        )\n    } else {\n      if (isOpen) {\n        const plane = this.getStringVisiblePlane();\n        if (this.state.sliceMax > 1 && this.mprPlane !== plane && this.mprPlane !== '') {\n          return (\n            <Typography variant=\"overline\" className={classes.title}>\n              {'MPR ' + plane}\n            </Typography>\n          )\n        }\n        return (\n          <Typography variant=\"overline\" className={classes.title}>\n            {this.getFileName(dcmViewer)}\n          </Typography>\n        )\n      } else if (this.props.dicomdir !== null) {\n        return (\n          <Typography variant=\"overline\" className={classes.title}>\n            {this.props.dicomdir.dicomdir.webkitRelativePath}\n          </Typography>\n        )\n      } else\n        return (\n          <Typography variant=\"overline\" className={classes.title}>\n            <strong>U</strong>niversal <strong>D</strong>icom <strong>V</strong>iewer\n          </Typography>\n        )\n    }\n  };\n\n  // ---------------------------------------------------------------------------------------------- MPR\n\n  getImageOrientationZ = (image) => {\n    const iop = image.data.string('x00200037').split('\\\\'); // Image Orientation Patient\n\n    let v = new Array(3).fill(0).map(() => new Array(3).fill(0));\n\n    v[0][0] = parseFloat(iop[0]); // the x direction cosines of the first row X\n    v[0][1] = parseFloat(iop[1]); // the y direction cosines of the first row X\n    v[0][2] = parseFloat(iop[2]); // the z direction cosines of the first row X\n    v[1][0] = parseFloat(iop[3]); // the x direction cosines of the first column Y\n    v[1][1] = parseFloat(iop[4]); // the y direction cosines of the first column Y\n    v[1][2] = parseFloat(iop[5]); // the z direction cosines of the first column Y\n    //console.log('getImageOrientationZ: ', v[1][2])\n    return v[1][2]\n  };\n\n  mprBuildVolume = () => {\n    if (this.volume.length > 0) return;\n\n    this.t0 = performance.now();\n\n    const files = this.props.files;\n    const xPixelSpacing = getPixelSpacing(files[0].image, 0);\n    const spacingBetweenSlice = getSpacingBetweenSlice(files[0].image);\n    const sliceThickness = getSliceThickness(files[0].image);\n    const length = files[0].image.getPixelData().length;\n    const sliceLocation = getSliceLocation(files[0].image);\n    this.volume = [];\n    // see https://stackoverflow.com/questions/58412358/dicom-multiplanar-image-reconstruction\n    this.mprData.zDim = Math.round(files.length * spacingBetweenSlice / xPixelSpacing);\n\n    //console.log('this.mprData.zDim: ', this.mprData.zDim)\n    //console.log('spacingBetweenSlice: ', spacingBetweenSlice)\n    //console.log('sliceThickness: ', sliceThickness)\n    //console.log('xPixelSpacing: ', xPixelSpacing)\n    //console.log('getSliceLocation: ', sliceLocation)\n\n    // If spacing between slices is less than slice thickness, the images are not optimal for 3D reconstruction.\n    // Try an alternative algorithm based on slice distance.\n    let zDimMethod2 = false;\n    if (spacingBetweenSlice < sliceThickness && sliceLocation === undefined) {\n      let max = 0;\n      let min = 0;\n      for (let i = 0; i < files.length; i++) {\n        if (files[i].sliceDistance > max)\n          max = files[i].sliceDistance;\n        if (files[i].sliceDistance < min)\n          min = files[i].sliceDistance\n      }\n      this.mprData.zDim = Math.round(Math.abs(max - min) / xPixelSpacing);\n      //console.log('method2, this.mprData.zDim: ', this.mprData.zDim)\n      zDimMethod2 = true\n    }\n\n    if (files.length === this.mprData.zDim) { // slices contiguous\n      for (let i = 0, len = files.length; i < len; i++) {\n        this.volume.push(files[i].image.getPixelData())\n      }\n\n    } else if (files.length < this.mprData.zDim) { // gap between slices\n\n      let emptyPlane = new Int16Array(length).fill(0);\n      for (let i = 0, len = this.mprData.zDim; i < len; i++) {\n        this.volume.push(emptyPlane)\n      }\n\n      let order = [];\n\n      for (let i = 0; i < files.length; i++) {\n        order.push({\n          iFile: i,\n          instanceNumber: files[i].instanceNumber,\n          sliceDistance: files[i].sliceDistance,\n          sliceLocation: files[i].sliceLocation\n        })\n      }\n\n      if (zDimMethod2) {\n        // eliminate eventually duplicates\n        order = order.reduce((previous, current) => {\n          let object = previous.filter(object => object.sliceDistance === current.sliceDistance);\n          if (object.length === 0) {\n            previous.push(current)\n          }\n          return previous\n        }, []);\n\n        order.sort((l, r) => {\n          // return r.sliceDistance - l.sliceDistance\n          return l.instanceNumber - r.instanceNumber\n        })\n        //console.log('order: ', order)     \n      } else {\n        // const reorder = files[0].sliceDistance < files[1].sliceDistance\n        const reorder = files[0].sliceLocation < files[1].sliceLocation;\n        if (reorder) {\n          order.sort((l, r) => {\n            // return l.instanceNumber - r.instanceNumber\n            // return r.sliceDistance - l.sliceDistance\n            return r.sliceLocation - l.sliceLocation\n          })\n          //console.log('reorder: ')     \n        }\n      }\n      /*if (this.getImageOrientationZ(files[0].image) < 0) {\n        order.sort((l, r) => {\n          return r.instanceNumber - l.instanceNumber\n          // return r.sliceDistance - l.sliceDistance\n        })     \n        console.log('reorder 2: ')        \n      }*/\n\n      let intervals = [0];\n      this.volume[0] = files[order[0].iFile].image.getPixelData();\n      this.volume[this.mprData.zDim - 1] = files[order[order.length - 1].iFile].image.getPixelData();\n      const step = (this.mprData.zDim - 2) / (order.length - 2);\n      let i = 0;\n      for (let k = 1; k <= order.length - 2; k++) {\n        i = Math.ceil(i + step);\n        //console.log(`i: ${i},  k: ${k},  order[k].iFile: ${order[k].iFile}`)\n        this.volume[i] = files[order[k].iFile].image.getPixelData(); // order[k-1].iFile\n        intervals.push(i)\n      }\n      intervals.push(this.mprData.zDim - 1);\n      console.log('intervals: ', intervals);\n\n      //console.log('this.volume: ', this.volume)\n\n      const interpolationMethod = getSettingsMprInterpolation();\n\n      if (interpolationMethod === 'no') {\n        // build missing planes without interpolation, simple duplicate\n        for (let i = 0; i < intervals.length - 1; i++) {\n          //console.log(`intervals: ${intervals[i]} - ${intervals[i+1]}`)\n          for (let j = intervals[i] + 1; j <= intervals[i + 1] - 1; j++) {\n            //console.log(`j: ${j}`)\n            this.volume[j] = this.volume[intervals[i + 1]]\n          }\n        }\n\n      } else if (interpolationMethod === 'weightedlinear') {\n        // build the interpolate planes between original planes\n        for (let i = 0; i < intervals.length - 1; i++) {\n          //console.log(`intervals: ${intervals[i]} - ${intervals[i+1]}`)\n          const step = intervals[i + 1] - intervals[i];\n\n          for (let j = intervals[i] + 1; j < intervals[i + 1]; j++) {\n            //console.log(`i: ${i}, intervals[i]: ${intervals[i]}, j: ${j}`)\n\n            let p = new Int16Array(length);\n            const w = (j - intervals[i]) / step;\n\n            for (let k = 0; k < length - 1; k++) {\n              // simple linear interpolation\n              // const p0 = this.volume[intervals[i]][k]\n              // const p1 = this.volume[intervals[i+1]][k]\n              // p[k] = (p0+p1)/2   \n\n              // weighted linear interpolation\n              const p0 = this.volume[intervals[i]][k] * (1 - w);\n              const p1 = this.volume[intervals[i + 1]][k] * w;\n              p[k] = p0 + p1;\n              if (p0 === undefined || p1 === undefined) {\n                console.log('undefined')\n              }\n              // weighted bilinear interpolation\n              /*if (k-1 > 0 && k+1 < length) {\n                const p0 = this.volume[intervals[i]][k] * (1-w) * 0.5 + this.volume[intervals[i]][k-1] * (1-w) * 0.25 + this.volume[intervals[i]][k+1] * (1-w) * 0.25\n                const p1 = this.volume[intervals[i+1]][k] * w * 0.5 + this.volume[intervals[i+1]][k-1] * w * 0.25 + this.volume[intervals[i+1]][k+1] * w * 0.25\n                p[k] = p0+p1\n              } else if (k-1 < 0) {\n                const p0 = this.volume[intervals[i]][k] * (1-w) * 0.75 + this.volume[intervals[i]][k+1] * (1-w) * 0.25\n                const p1 = this.volume[intervals[i+1]][k] * w * 0.5 + this.volume[intervals[i+1]][k+1] * w * 0.25\n                p[k] = p0+p1\n              } else { // k+1 > length \n                const p0 = this.volume[intervals[i]][k] * (1-w) * 0.75 + this.volume[intervals[i]][k-1] * (1-w) * 0.25\n                const p1 = this.volume[intervals[i+1]][k] * w * 0.5 + this.volume[intervals[i+1]][k-1] * w * 0.25\n                p[k] = p0+p1\n              }*/\n            }\n\n            this.volume[j] = p\n          }\n        }\n      }\n\n      this.t1 = performance.now();\n      console.log(`performance volume building: ${this.t1 - this.t0} milliseconds`)\n\n    } else { // overlapping slices\n      this.mprData.zStep = files.length / this.mprData.zDim;\n      //console.log('this.mprData.zStep: ', this.mprData.zStep)\n      for (let i = 0, len = this.mprData.zDim; i < len; i++) {\n        const k = Math.round(i * this.mprData.zStep);\n        this.volume.push(files[k].image.getPixelData())\n      }\n    }\n\n    if (this.state.visibleMprOrthogonal) {\n      this.changeToOrthogonalView()\n\n    } else if (this.state.visibleMprSagittal) {\n      this.changeToSagittalView()\n\n    } else if (this.state.visibleMprCoronal) {\n      this.changeToCoronalView()\n\n    } else { // axial\n      this.changeToAxialView()\n    }\n  };\n\n  changeToOrthogonalView = () => {\n    this.changeLayout(1, 3);\n\n    this.setState({visibleVolumeBuilding: false}, () => {\n      const plane = this.mprPlanePosition();\n\n      const index = Math.round(this.props.files.length / 2);\n\n      if (this.dicomViewersRefs[0].volume === null)\n        this.dicomViewersRefs[0].volume = this.volume;\n\n      this.mprSliceIndex[0] = index;\n      this.dicomViewersRefs[0].runTool('openimage', index);\n\n      if (this.dicomViewersRefs[1].volume === null)\n        this.dicomViewersRefs[1].volume = this.volume;\n      const xzIndex = Math.round(this.props.files[0].image.columns / 2);\n      this.mprSliceIndex[1] = xzIndex;\n      this.dicomViewersRefs[1].mprRenderXZPlane(this.dicomViewersRefs[0].filename, plane, xzIndex, this.mprData);\n\n      if (this.dicomViewersRefs[2].volume === null)\n        this.dicomViewersRefs[2].volume = this.volume;\n      const yzIndex = Math.round(this.props.files[0].image.rows / 2);\n      this.mprSliceIndex[2] = yzIndex;\n      this.dicomViewersRefs[2].mprRenderYZPlane(this.dicomViewersRefs[0].filename, plane, yzIndex, this.mprData)\n    })\n\n  };\n\n  changeToSagittalView = () => {\n    this.changeLayout(1, 1);\n\n    this.setState({visibleVolumeBuilding: false}, () => {\n      const plane = this.mprPlanePosition();\n\n      if (this.dicomViewersRefs[this.props.activeDcmIndex].volume === null)\n        this.dicomViewersRefs[this.props.activeDcmIndex].volume = this.volume;\n      //console.log('mprSagittal, this.mprPlanePosition(): ', plane)\n\n      if (plane === 'sagittal') {\n        const sliceMax = this.props.files === null ? 1 : this.props.files.length;\n        const index = Math.round(sliceMax / 2);\n        this.setState({sliceIndex: index, sliceMax: sliceMax});\n        this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openimage', index)\n\n      } else if (plane === 'axial') {\n        const sliceMax = this.props.files[0].image.columns;\n        const index = Math.round(sliceMax / 2);\n        this.setState({sliceIndex: index, sliceMax: sliceMax});\n        this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderYZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData)\n\n      } else {\n        const sliceMax = this.props.files[0].image.rows;\n        const index = Math.round(sliceMax / 2);\n        this.setState({sliceIndex: index, sliceMax: sliceMax});\n        this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderXZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData)\n      }\n    })\n  };\n\n  changeToCoronalView = () => {\n    this.changeLayout(1, 1);\n\n    this.setState({visibleVolumeBuilding: false}, () => {\n      const plane = this.mprPlanePosition();\n\n      if (this.dicomViewersRefs[this.props.activeDcmIndex].volume === null)\n        this.dicomViewersRefs[this.props.activeDcmIndex].volume = this.volume;\n      //console.log('mprCoronal, this.mprPlanePosition(): ', plane)\n\n      if (plane === 'coronal') {\n        const sliceMax = this.props.files === null ? 1 : this.props.files.length;\n        const index = Math.round(sliceMax / 2);\n        this.setState({sliceIndex: index, sliceMax: sliceMax});\n        this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openimage', index)\n\n      } else if (plane === 'axial') {\n        const sliceMax = this.props.files[0].image.columns;\n        const index = Math.round(sliceMax / 2);\n        this.setState({sliceIndex: index, sliceMax: sliceMax});\n        this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderXZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData)\n\n      } else { // plane is sagittal\n        const sliceMax = this.props.files[0].image.rows;\n        const index = Math.round(sliceMax / 2);\n        this.setState({sliceIndex: index, sliceMax: sliceMax});\n        this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderYZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData)\n      }\n    })\n  };\n\n  changeToAxialView = () => {\n    this.changeLayout(1, 1);\n\n    this.setState({visibleVolumeBuilding: false}, () => {\n      const plane = this.mprPlanePosition();\n\n      if (this.dicomViewersRefs[this.props.activeDcmIndex].volume === null)\n        this.dicomViewersRefs[this.props.activeDcmIndex].volume = this.volume;\n      //console.log('mprAxial, this.mprPlanePosition(): ', plane)\n\n      if (plane === 'axial') {\n        const sliceMax = this.props.files === null ? 1 : this.props.files.length;\n        const index = Math.round(sliceMax / 2);\n        this.setState({sliceIndex: index, sliceMax: sliceMax});\n        this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openimage', index)\n\n      } else if (plane === 'sagittal') {\n        const sliceMax = this.props.files[0].image.columns;\n        const index = Math.round(sliceMax / 2);\n        this.setState({sliceIndex: index, sliceMax: sliceMax});\n        this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderXZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData)\n\n      } else {\n        const sliceMax = this.props.files[0].image.rows;\n        const index = Math.round(sliceMax / 2);\n        this.setState({sliceIndex: index, sliceMax: sliceMax});\n        this.dicomViewersRefs[this.props.activeDcmIndex].mprRenderYZPlane(this.dicomViewersRefs[0].filename, plane, index, this.mprData)\n      }\n    })\n  };\n\n  mprPlanePosition = () => {\n    if (this.mprPlane === '') {\n      this.mprPlane = this.dicomViewersRefs[this.props.activeDcmIndex].mprPlanePosition()\n    }\n    return this.mprPlane\n  };\n\n  mprOrthogonal = () => {\n    const visibleMprOrthogonal = this.state.visibleMprOrthogonal;\n    if (!visibleMprOrthogonal) {\n      const index = Math.round(this.props.files.length / 2);\n      //console.log('mprOrthogonal, index: ', index)\n      this.setState({sliceIndex: index});\n      this.setState({\n        visibleMprOrthogonal: true,\n        visibleMprCoronal: false,\n        visibleMprSagittal: false,\n        visibleMprAxial: false\n      }, () => {\n        if (this.volume.length === 0) {\n          this.setState({visibleVolumeBuilding: true}, () => {\n            setTimeout(() => {\n              this.mprBuildVolume()\n            }, 100)\n          })\n        } else {\n          this.changeToOrthogonalView()\n        }\n      })\n    }\n  };\n\n  mprSagittal = () => {\n    const visibleMprSagittal = this.state.visibleMprSagittal;\n    if (!visibleMprSagittal) {\n      this.setState({\n        visibleMprOrthogonal: false,\n        visibleMprSagittal: true,\n        visibleMprCoronal: false,\n        visibleMprAxial: false\n      }, () => {\n        if (this.volume.length === 0) {\n          this.setState({visibleVolumeBuilding: true}, () => {\n            setTimeout(() => {\n              this.mprBuildVolume()\n            }, 100)\n          })\n        } else {\n          this.changeToSagittalView()\n        }\n      })\n    }\n  };\n\n  mprCoronal = () => {\n    const visibleMprCoronal = this.state.visibleMprCoronal;\n    if (!visibleMprCoronal) {\n      this.setState({\n        visibleMprOrthogonal: false,\n        visibleMprSagittal: false,\n        visibleMprCoronal: true,\n        visibleMprAxial: false\n      }, () => {\n        if (this.volume.length === 0) {\n          this.setState({visibleVolumeBuilding: true}, () => {\n            setTimeout(() => {\n              this.mprBuildVolume()\n            }, 100)\n          })\n        } else {\n          this.changeToCoronalView()\n        }\n      })\n    }\n  };\n\n  mprAxial = () => {\n    const visibleMprAxial = this.state.visibleMprAxial;\n    if (!visibleMprAxial) {\n      this.setState({\n        visibleMprOrthogonal: false,\n        visibleMprSagittal: false,\n        visibleMprCoronal: false,\n        visibleMprAxial: true\n      }, () => {\n        if (this.volume.length === 0) {\n          this.setState({visibleVolumeBuilding: true}, () => {\n            setTimeout(() => {\n              this.mprBuildVolume()\n            }, 100)\n          })\n        } else {\n          this.changeToAxialView()\n        }\n      })\n    }\n  };\n\n  // ---------------------------------------------------------------------------------------------- MPR end\n\n  listOpenFilesFirstFrame = () => {\n    const index = 0;\n    //this.props.setLocalFileStore(this.files[index])\n    this.setState({sliceIndex: index}, () => {\n      this.handleOpenImage(index)\n    })\n  };\n\n  listOpenFilesPreviousFrame = () => {\n    let index = this.state.sliceIndex;\n    index = index === 0 ? this.state.sliceMax - 1 : index - 1;\n    //this.props.setLocalFileStore(this.files[index])\n    this.setState({sliceIndex: index}, () => {\n      this.handleOpenImage(index)\n    })\n  };\n\n  listOpenFilesNextFrame = () => {\n    let index = this.state.sliceIndex;\n    index = index === this.state.sliceMax - 1 ? 0 : index + 1;\n    //this.props.setLocalFileStore(this.files[index])\n    this.setState({sliceIndex: index}, () => {\n      this.handleOpenImage(index)\n    })\n  };\n\n  listOpenFilesLastFrame = () => {\n    const index = this.state.sliceMax - 1;\n    //this.props.setLocalFileStore(this.files[index])\n    this.setState({sliceIndex: index}, () => {\n      this.handleOpenImage(index)\n    })\n  };\n\n  listOpenFilesScrolling = () => {\n    const scrolling = this.state.listOpenFilesScrolling;\n    this.setState({listOpenFilesScrolling: !scrolling}, () => {\n      if (scrolling) {\n        clearInterval(this.timerScrolling)\n      } else {\n        this.timerScrolling = setInterval(() => {\n          this.listOpenFilesNextFrame()\n        }, 500)\n      }\n    })\n  };\n\n  handleSliceChange = (event, value) => {\n    console.log('slice value: ', Math.floor(value));\n    this.setState({sliceIndex: Math.floor(value)}, () => {\n      let index = this.state.sliceIndex;\n      this.props.setLocalFileStore(this.files[index]);\n      this.handleOpenImage(index)\n    })\n  };\n\n  render() {\n    //console.log('App render: ')\n\n    const {classes} = this.props;\n\n    const primaryClass = {primary: classes.listItemText};\n    const iconSize = '1.2rem';\n\n    const isOpen = this.props.isOpen[this.props.activeDcmIndex];\n    const isDicomdir = this.props.dicomdir !== null;\n    const isMultipleFiles = this.props.files === null ? false : this.props.files.length > 1;\n\n    const openMenu = this.state.openMenu;\n    const openImageEdit = this.state.openImageEdit;\n    const openTools = this.state.openTools;\n    const openMpr = this.state.openMpr && isMultipleFiles && this.mprPlane !== '';\n    const visibleMainMenu = this.state.visibleMainMenu;\n    const visibleHeader = this.state.visibleHeader;\n    const visibleSettings = this.state.visibleSettings;\n    const visibleAbout = this.state.visibleAbout;\n    const visibleMeasure = this.state.visibleMeasure;\n    const visibleToolbox = this.state.visibleToolbox;\n    const visibleDicomdir = this.state.visibleDicomdir;\n    const visibleFileManager = this.state.visibleFileManager;\n    const visibleClearMeasureDlg = this.state.visibleClearMeasureDlg;\n    const visibleZippedFileDlg = this.state.visibleZippedFileDlg;\n    const visibleDownloadZipDlg = this.state.visibleDownloadZipDlg;\n    const visibleOpenMultipleFilesDlg = this.state.visibleOpenMultipleFilesDlg;\n    const visibleLayout = Boolean(this.state.anchorElLayout);\n    const visibleVolumeBuilding = this.state.visibleVolumeBuilding;\n    const visibleMprOrthogonal = this.state.visibleMprOrthogonal;\n    const visibleMprCoronal = this.state.visibleMprCoronal;\n    const visibleMprSagittal = this.state.visibleMprSagittal;\n    const visibleMprAxial = this.state.visibleMprAxial;\n\n    let iconToolColor = this.state.toolState === 1 ? '#FFFFFF' : '#999999';\n\n    const dcmViewer = this.getActiveDcmViewer();\n\n    const sliceMax = this.state.sliceMax;\n\n    const anchorEl = this.state.anchorEl;\n\n\n    //console.log('this.dicomViewersRefs: ', this.dicomViewersRefs)\n    //console.log('isMultipleFiles: ', isMultipleFiles)    \n    //console.log('this.mprPlane: ', this.mprPlane) \n\n    return (\n      <div>\n        <AppBar className={classes.appBar} position='static' elevation={0}>\n          <Toolbar variant=\"dense\">\n            <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\"\n                        onClick={this.toggleMainMenu}>\n              <MenuIcon/>\n            </IconButton>\n\n            <Tooltip title={\"File Manager\"} arrow>\n              <IconButton button onClick={() => this.toggleFileManager()}>\n                <Icon path={mdiFileCabinet} size={iconSize} color={iconColor}/>\n              </IconButton>\n            </Tooltip>\n            <Tooltip title={\"Open\"} arrow>\n            <IconButton button onClick={(event) => this.toggleOpenMenu(event)}>\n              <Icon path={mdiFolderMultiple} size={iconSize} color={iconColor}/>\n              {openMenu ? <ExpandLess/> : <ExpandMore/>}\n            </IconButton>\n            </Tooltip>\n            <Popper open={openMenu} anchorEl={anchorEl} role={undefined} transition disablePortal>\n              {({ TransitionProps, placement }) => (\n                <Grow\n                  {...TransitionProps}\n                  style={{ transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom' }}\n                >\n                  <Paper>\n                    <ClickAwayListener onClickAway={(event) => this.toggleOpenMenu(event)}>\n                      <MenuList autoFocusItem={openMenu} id=\"menu-list-grow\" onKeyDown={(event) => this.toggleOpenMenu(event)}>\n\n                        <MenuItem button style={{paddingLeft: 30}} onClick={() => this.showFileOpen()}>\n                          <ListItemIcon><Icon path={mdiFolder} size={'1.0rem'} color={iconColor}/></ListItemIcon>\n                          <ListItemText classes={primaryClass}\n                                        primary={\n                                          <Typography type=\"body1\"\n                                                      style={{fontSize: '0.80em', marginLeft: '-20px'}}>File</Typography>\n                                        }/>\n                        </MenuItem>\n                        <MenuItem onClick={(event) => this.toggleOpenMenu(event)}>Profile</MenuItem>\n                        <MenuItem onClick={(event) => this.toggleOpenMenu(event)}>My account</MenuItem>\n                        <MenuItem onClick={(event) => this.toggleOpenMenu(event)}>Logout</MenuItem>\n                      </MenuList>\n                    </ClickAwayListener>\n                  </Paper>\n                </Grow>\n              )}\n            </Popper>\n\n            <Tooltip title={\"Clear All\"} arrow>\n              <IconButton button onClick={() => this.clear()}>\n                <Icon path={mdiDelete} size={iconSize} color={iconColor}/>\n              </IconButton>\n            </Tooltip>\n            <Tooltip title={\"Layout\"} arrow>\n              <IconButton button onClick={this.handleLayout}>\n                <Icon path={mdiViewGridPlusOutline} size={iconSize} color={iconColor}/>\n              </IconButton>\n            </Tooltip>\n            <Tooltip title={\"Settings\"} arrow>\n              <IconButton button onClick={() => this.showSettings()}>\n                <Icon path={mdiSettings} size={iconSize} color={iconColor}/>\n              </IconButton>\n            </Tooltip>\n\n\n            {this.appBarTitle(classes, isOpen, dcmViewer)}\n\n            <div className={classes.grow}/>\n            {!isOpen && !isDicomdir ? (\n              <IconButton onClick={this.showAbout}>\n                <Icon path={mdiInformationOutline} size={iconSize} color={iconColor}/>\n              </IconButton>\n            ) : null\n            }\n            {iconTool !== null && this.props.tool !== null && isOpen ? (\n              <IconButton onClick={this.toolChange}>\n                <Icon path={iconTool} size={iconSize} color={iconToolColor}/>\n              </IconButton>\n            ) : null\n            }\n            {isOpen && dcmViewer.numberOfFrames > 1 && isOpen ? (\n              <IconButton onClick={this.cinePlayer}>\n                <Icon path={mdiVideo} size={iconSize} color={iconColor}/>\n              </IconButton>\n            ) : null\n            }\n            {isOpen ? (\n              <IconButton onClick={this.resetImage}>\n                <Icon path={mdiRefresh} size={iconSize} color={iconColor}/>\n              </IconButton>\n            ) : null\n            }\n            {isOpen ? (\n              <IconButton color=\"inherit\" onClick={this.saveShot}>\n                <Icon path={mdiCamera} size={iconSize} color={iconColor}/>\n              </IconButton>\n            ) : null\n            }\n            {isOpen ? (\n              <IconButton color=\"inherit\" onClick={this.toggleToolbox}>\n                <Icon path={mdiToolbox} size={iconSize} color={iconColor}/>\n              </IconButton>\n            ) : null\n            }\n            {isOpen ? (\n              <IconButton color=\"inherit\" onClick={this.toggleMeasure}>\n                <Icon path={mdiFileCad} size={iconSize} color={iconColor}/>\n              </IconButton>\n            ) : null\n            }\n            {isOpen && dcmViewer.isDicom ? (\n              <IconButton color=\"inherit\" onClick={this.toggleHeader}>\n                <Icon path={mdiFileDocument} size={iconSize} color={iconColor}/>\n              </IconButton>\n            ) : null\n            }\n            {isDicomdir ? (\n              <IconButton color=\"inherit\" onClick={this.toggleDicomdir}>\n                <Icon path={mdiFolderOpen} size={iconSize} color={iconColor}/>\n              </IconButton>\n            ) : null\n            }\n            {isOpen ? (\n              <IconButton color=\"inherit\" onClick={this.toggleFileManager}>\n                <Icon path={mdiFileCabinet} size={iconSize} color={iconColor}/>\n              </IconButton>\n            ) : null\n            }\n          </Toolbar>\n        </AppBar>\n\n        <Drawer\n          variant=\"persistent\"\n          open={visibleMainMenu}\n          style={{position: 'relative', zIndex: 1}}\n          onClose={this.toggleMainMenu}\n        >\n          <div className={classes.toolbar}>\n            <List dense={true}>\n              <ListItem button onClick={() => this.showAppBar()}>\n                <ListItemIcon><MenuIcon/></ListItemIcon>\n                <ListItemText primary='Tool Bar'/>\n              </ListItem>\n              <ListItem button onClick={() => this.toggleFileManager()}>\n                <ListItemIcon><Icon path={mdiFileCabinet} size={iconSize} color={iconColor}/></ListItemIcon>\n                <ListItemText classes={primaryClass} primary='File Manager'/>\n              </ListItem>\n\n              <ListItem button onClick={() => this.toggleOpenMenu()}>\n                <ListItemIcon><Icon path={mdiFolderMultiple} size={iconSize} color={iconColor}/></ListItemIcon>\n                <ListItemText classes={primaryClass} primary='Open ...'/>\n                {openMenu ? <ExpandLess/> : <ExpandMore/>}\n              </ListItem>\n              <Collapse in={openMenu} timeout=\"auto\" unmountOnExit>\n                <List dense={true} component=\"div\">\n                  <ListItem button style={{paddingLeft: 30}} onClick={() => this.showFileOpen()}>\n                    <ListItemIcon><Icon path={mdiFolder} size={'1.0rem'} color={iconColor}/></ListItemIcon>\n                    <ListItemText classes={primaryClass}\n                                  primary={\n                                    <Typography type=\"body1\"\n                                                style={{fontSize: '0.80em', marginLeft: '-20px'}}>File</Typography>\n                                  }/>\n                  </ListItem>\n                  <ListItem button style={{paddingLeft: 30}} onClick={() => this.showOpenUrl()}>\n                    <ListItemIcon><Icon path={mdiWeb} size={'1.0rem'} color={iconColor}/></ListItemIcon>\n                    <ListItemText classes={primaryClass}\n                                  primary={\n                                    <Typography type=\"body1\"\n                                                style={{fontSize: '0.80em', marginLeft: '-20px'}}>URL</Typography>\n                                  }/>\n                  </ListItem>\n                  {isInputDirSupported() && !isMobile ?\n                    <ListItem button style={{paddingLeft: 30}} onClick={() => this.showOpenFolder()}>\n                      <ListItemIcon><Icon path={mdiFolderOpen} size={'1.0rem'} color={iconColor}/></ListItemIcon>\n                      <ListItemText classes={primaryClass}\n                                    primary={\n                                      <Typography type=\"body1\"\n                                                  style={{fontSize: '0.80em', marginLeft: '-20px'}}>Folder</Typography>\n                                    }/>\n                    </ListItem>\n                    : null}\n                  {isInputDirSupported() && !isMobile ?\n                    <ListItem button style={{paddingLeft: 30}} onClick={() => this.showOpenDicomdir()}>\n                      <ListItemIcon><Icon path={mdiFolderOpen} size={'1.0rem'} color={iconColor}/></ListItemIcon>\n                      <ListItemText classes={primaryClass}\n                                    primary={\n                                      <Typography type=\"body1\" style={{\n                                        fontSize: '0.80em',\n                                        marginLeft: '-20px'\n                                      }}>DICOMDIR</Typography>\n                                    }/>\n                    </ListItem>\n                    : null}\n                </List>\n              </Collapse>\n\n              <ListItem button onClick={() => this.clear()}>\n                <ListItemIcon><Icon path={mdiDelete} size={iconSize} color={iconColor}/></ListItemIcon>\n                <ListItemText classes={primaryClass} primary='Clear All'/>\n              </ListItem>\n              <ListItem button onClick={this.handleLayout}>\n                <ListItemIcon><Icon path={mdiViewGridPlusOutline} size={iconSize} color={iconColor}/></ListItemIcon>\n                <ListItemText classes={primaryClass} primary='Layout'/>\n              </ListItem>\n              <ListItem button onClick={() => this.showSettings()}>\n                <ListItemIcon><Icon path={mdiSettings} size={iconSize} color={iconColor}/></ListItemIcon>\n                <ListItemText classes={primaryClass} primary='Settings'/>\n              </ListItem>\n              <Divider/>\n              <ListItem button onClick={() => this.toggleToolbox()} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiChartHistogram} size={iconSize} color={iconColor}/></ListItemIcon>\n                <ListItemText classes={primaryClass} primary='Histogram'/>\n              </ListItem>\n              <ListItem button onClick={() => this.toggleMpr()}\n                        disabled={!isOpen || !isMultipleFiles || this.mprPlane === ''}>\n                <ListItemIcon><Icon path={mdiAxisArrow} size={iconSize} color={iconColor}/></ListItemIcon>\n                <ListItemText classes={primaryClass} primary='MPR'/>\n                {openMpr ? <ExpandLess/> : <ExpandMore/>}\n              </ListItem>\n              <Collapse in={openMpr} timeout=\"auto\" unmountOnExit>\n                <List dense={true} component=\"div\">\n                  <ListItem button style={{paddingLeft: 40}} onClick={() => this.mprOrthogonal()}>\n                    {visibleMprOrthogonal ?\n                      <ListItemIcon style={{marginLeft: '-10px'}}><Icon path={mdiCheck} size={'1.0rem'}\n                                                                        color={iconColor}/></ListItemIcon> : null}\n                    <ListItemText\n                      style={visibleMprOrthogonal ? {marginLeft: '-7px'} : {marginLeft: '40px'}}\n                      classes={primaryClass}\n                      primary={\n                        <Typography type=\"body1\"\n                                    style={{fontSize: '0.80em', marginLeft: '-23px'}}>Orthogonal</Typography>\n                      }/>\n                  </ListItem>\n                  <ListItem button style={{paddingLeft: 40}} onClick={() => this.mprCoronal()}>\n                    {visibleMprCoronal ?\n                      <ListItemIcon style={{marginLeft: '-10px'}}><Icon path={mdiCheck} size={'1.0rem'}\n                                                                        color={iconColor}/></ListItemIcon> : null}\n                    <ListItemText\n                      style={visibleMprCoronal ? {marginLeft: '-7px'} : {marginLeft: '40px'}}\n                      classes={primaryClass}\n                      primary={\n                        <Typography type=\"body1\" style={{fontSize: '0.80em', marginLeft: '-23px'}}>Coronal</Typography>\n                      }/>\n                  </ListItem>\n                  <ListItem button style={{paddingLeft: 40}} onClick={() => this.mprSagittal()}>\n                    {visibleMprSagittal ?\n                      <ListItemIcon style={{marginLeft: '-10px'}}><Icon path={mdiCheck} size={'1.0rem'}\n                                                                        color={iconColor}/></ListItemIcon> : null}\n                    <ListItemText\n                      style={visibleMprSagittal ? {marginLeft: '-7px'} : {marginLeft: '40px'}}\n                      classes={primaryClass}\n                      primary={\n                        <Typography type=\"body1\" style={{fontSize: '0.80em', marginLeft: '-23px'}}>Sagittal</Typography>\n                      }/>\n                  </ListItem>\n                  <ListItem button style={{paddingLeft: 40}} onClick={() => this.mprAxial()}>\n                    {visibleMprAxial ? <ListItemIcon style={{marginLeft: '-10px'}}><Icon path={mdiCheck} size={'1.0rem'}\n                                                                                         color={iconColor}/></ListItemIcon> : null}\n                    <ListItemText\n                      style={visibleMprAxial ? {marginLeft: '-7px'} : {marginLeft: '40px'}}\n                      classes={primaryClass}\n                      primary={\n                        <Typography type=\"body1\" style={{fontSize: '0.80em', marginLeft: '-23px'}}>Axial</Typography>\n                      }/>\n                  </ListItem>\n                </List>\n              </Collapse>\n              <ListItem button onClick={() => this.toggleImageEdit()} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiImageEdit} size={iconSize} color={iconColor}/></ListItemIcon>\n                <ListItemText classes={primaryClass} primary='Edit'/>\n                {openImageEdit ? <ExpandLess/> : <ExpandMore/>}\n              </ListItem>\n              <Collapse in={openImageEdit} timeout=\"auto\" unmountOnExit>\n                <List dense={true} component=\"div\">\n                  <ListItem button style={{paddingLeft: 30}} onClick={() => this.toolExecute('Invert')}>\n                    <ListItemIcon><Icon path={mdiInvertColors} size={iconSize} color={iconColor}/></ListItemIcon>\n                    <ListItemText classes={primaryClass} primary=\"Invert\"/>\n                  </ListItem>\n                </List>\n              </Collapse>\n              <ListItem button onClick={() => this.toggleTools()} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiTools} size={iconSize} color={iconColor}/></ListItemIcon>\n                <ListItemText classes={primaryClass} primary='Tools'/>\n                {openTools ? <ExpandLess/> : <ExpandMore/>}\n              </ListItem>\n              <Collapse in={openTools} timeout=\"auto\" unmountOnExit>\n                <List dense={true} component=\"div\">\n                  <ListItem button style={{paddingLeft: 30}} onClick={() => this.toolExecute('notool')}\n                            disabled={!isOpen}>\n                    <ListItemIcon><Icon path={mdiCursorDefault} size={iconSize} color={iconColor}/></ListItemIcon>\n                    <ListItemText classes={primaryClass} primary='No tool'/>\n                  </ListItem>\n                  <ListItem button style={{paddingLeft: 30}} onClick={() => this.toolExecute('Wwwc')}\n                            disabled={!isOpen}>\n                    <ListItemIcon><Icon path={mdiArrowAll} size={iconSize} color={iconColor}/></ListItemIcon>\n                    <ListItemText classes={primaryClass} primary='WW/WC'/>\n                  </ListItem>\n                  <ListItem button style={{paddingLeft: 30}} onClick={() => this.toolExecute('Pan')} disabled={!isOpen}>\n                    <ListItemIcon><Icon path={mdiCursorPointer} size={iconSize} color={iconColor}/></ListItemIcon>\n                    <ListItemText classes={primaryClass} primary='Pan'/>\n                  </ListItem>\n                  <ListItem button style={{paddingLeft: 30}} onClick={() => this.toolExecute('Zoom')}\n                            disabled={!isOpen}>\n                    <ListItemIcon><Icon path={mdiMagnify} size={iconSize} color={iconColor}/></ListItemIcon>\n                    <ListItemText classes={primaryClass} primary='Zoom'/>\n                  </ListItem>\n                  <ListItem button style={{paddingLeft: 30}} onClick={() => this.toolExecute('Magnify')}\n                            disabled={!isOpen}>\n                    <ListItemIcon><Icon path={mdiCheckboxIntermediate} size={iconSize}\n                                        color={iconColor}/></ListItemIcon>\n                    <ListItemText classes={primaryClass} primary='Magnify'/>\n                  </ListItem>\n                  <ListItem button style={{paddingLeft: 30}} onClick={() => this.toolExecute('Length')}\n                            disabled={!isOpen}>\n                    <ListItemIcon><Icon path={mdiRuler} size={iconSize} color={iconColor}/></ListItemIcon>\n                    <ListItemText classes={primaryClass} primary='Length'/>\n                  </ListItem>\n                  <ListItem button style={{paddingLeft: 30}} onClick={() => this.toolExecute('Probe')}\n                            disabled={!isOpen}>\n                    <ListItemIcon><Icon path={mdiEyedropper} size={iconSize} color={iconColor}/></ListItemIcon>\n                    <ListItemText classes={primaryClass} primary='Probe'/>\n                  </ListItem>\n                  <ListItem button style={{paddingLeft: 30}} onClick={() => this.toolExecute('Angle')}\n                            disabled={!isOpen}>\n                    <ListItemIcon><Icon path={mdiAngleAcute} size={iconSize} color={iconColor}/></ListItemIcon>\n                    <ListItemText classes={primaryClass} primary='Angle'/>\n                  </ListItem>\n                  <ListItem button style={{paddingLeft: 30}} onClick={() => this.toolExecute('EllipticalRoi')}\n                            disabled={!isOpen}>\n                    <ListItemIcon><Icon path={mdiEllipse} size={iconSize} color={iconColor}/></ListItemIcon>\n                    <ListItemText classes={primaryClass} primary='Elliptical Roi'/>\n                  </ListItem>\n                  <ListItem button style={{paddingLeft: 30}} onClick={() => this.toolExecute('RectangleRoi')}\n                            disabled={!isOpen}>\n                    <ListItemIcon><Icon path={mdiRectangle} size={iconSize} color={iconColor}/></ListItemIcon>\n                    <ListItemText classes={primaryClass} primary='Rectangle Roi'/>\n                  </ListItem>\n                  <ListItem button style={{paddingLeft: 30}} onClick={() => this.toolExecute('FreehandRoi')}\n                            disabled={!isOpen}>\n                    <ListItemIcon><Icon path={mdiGesture} size={iconSize} color={iconColor}/></ListItemIcon>\n                    <ListItemText classes={primaryClass} primary='Freehand Roi'/>\n                  </ListItem>\n                </List>\n              </Collapse>\n\n            </List>\n\n            {isMultipleFiles ?\n              <div>\n                <Divider/>\n                <div align='center'>\n                  <IconButton onClick={this.listOpenFilesFirstFrame} size='small'>\n                    <Icon path={mdiSkipBackward} size={'1.0rem'} color={iconColor}/>\n                  </IconButton>\n                  <IconButton onClick={this.listOpenFilesPreviousFrame} size='small'>\n                    <Icon path={mdiSkipPrevious} size={'1.0rem'} color={iconColor}/>\n                  </IconButton>\n                  <IconButton onClick={this.listOpenFilesScrolling} size='small'>\n                    <Icon path={this.state.listOpenFilesScrolling ? mdiPause : mdiPlay} size={'1.0rem'}\n                          color={iconColor}/>\n                  </IconButton>\n                  <IconButton onClick={this.listOpenFilesNextFrame} size='small'>\n                    <Icon path={mdiSkipNext} size={'1.0rem'} color={iconColor}/>\n                  </IconButton>\n                  <IconButton onClick={this.listOpenFilesLastFrame} size='small'>\n                    <Icon path={mdiSkipForward} size={'1.0rem'} color={iconColor}/>\n                  </IconButton>\n                </div>\n                <div style={{textAlign: 'center'}}>\n                  <Typography type=\"body1\"\n                              style={{fontSize: '0.80em'}}>{`${this.state.sliceIndex + 1} / ${sliceMax}`}</Typography>\n                </div>\n                <div style={{width: '130px', margin: 'auto'}}>\n                  <Slider\n                    style={{marginTop: '-4px'}}\n                    value={this.state.sliceIndex}\n                    onChange={this.handleSliceChange}\n                    color=\"secondary\"\n                    min={0}\n                    max={sliceMax - 1}\n                    step={100 / sliceMax}\n                  />\n                </div>\n              </div> : null\n            }\n\n          </div>\n        </Drawer>\n\n        <Drawer\n          variant=\"persistent\"\n          anchor='right'\n          open={visibleHeader}\n          onClose={this.toggleHeader}\n        >\n          {visibleHeader ? <DicomHeader dcmViewer={dcmViewer} classes={classes} color={iconColor}/> : null}\n        </Drawer>\n\n        <Drawer\n          variant=\"persistent\"\n          anchor='right'\n          open={visibleMeasure}\n          onClose={this.toggleMeasure}\n        >\n          <div style={{marginTop: '48px'}}>\n            <Toolbar variant=\"dense\">\n              <Typography variant=\"subtitle1\" className={classes.title}>\n                Measurements&nbsp;&nbsp;\n              </Typography>\n              <div className={classes.grow}/>\n              <IconButton color=\"inherit\" onClick={this.saveMeasure} edge=\"end\">\n                <Icon path={mdiContentSaveOutline} size={iconSize} color={iconColor}/>\n              </IconButton>\n              <IconButton color=\"inherit\" onClick={this.clearMeasure} edge=\"end\">\n                <Icon path={mdiTrashCanOutline} size={iconSize} color={iconColor}/>\n              </IconButton>\n            </Toolbar>\n            <div>\n              {isOpen ? <Measurements dcmViewer={dcmViewer} toolRemove={this.toolRemove} classes={classes}/> : null}\n            </div>\n          </div>\n        </Drawer>\n\n        <Drawer\n          variant=\"persistent\"\n          anchor='right'\n          open={visibleToolbox}\n          onClose={this.toggleToolbox}\n        >\n          <div style={{marginTop: '48px'}}>\n            <div>\n              {isOpen ? <Histogram key={this.getFileName(dcmViewer)}/> : null}\n            </div>\n          </div>\n        </Drawer>\n\n        <Drawer\n          variant=\"persistent\"\n          anchor={getSettingsDicomdirView()}\n          open={visibleDicomdir}\n          onClose={this.toggleDicomdir}\n        >\n          <div>\n            <div>\n              {visibleDicomdir ?\n                <Dicomdir onOpenFile={this.handleOpenFileDicomdir} onOpenFs={this.handleOpenSandboxFs}/> : null}\n            </div>\n          </div>\n        </Drawer>\n\n        <Drawer\n          variant=\"persistent\"\n          anchor={getSettingsFsView()}\n          open={visibleFileManager}\n          onClose={this.toggleFileManager}\n        >\n          <div>\n            <div>\n              {visibleFileManager ?\n                <FsUI\n                  onOpen={this.handleOpenSandboxFs}\n                  onOpenImage={this.handleOpenImage}\n                  onOpenMultipleFilesCompleted={this.openMultipleFilesCompleted}\n                  onOpenDicomdir={this.handleOpenFsDicomdir}\n                  color={iconColor}\n                />\n                : null}\n            </div>\n          </div>\n        </Drawer>\n\n        {visibleSettings ? <Settings onClose={this.hideSettings}/> : null}\n\n        {visibleAbout ? <AboutDlg onClose={this.showAbout}/> : null}\n\n        {visibleDownloadZipDlg ? <DownloadZipDlg onClose={this.hideDownloadZipDlg} url={this.url}/> : null}\n\n        {visibleOpenMultipleFilesDlg ?\n          <OpenMultipleFilesDlg onClose={this.hideOpenMultipleFilesDlg} files={this.files} origin={'local'}/> : null}\n\n        <Dialog\n          open={visibleClearMeasureDlg}\n          onClose={this.hideClearMeasureDlg}\n        >\n          <DialogTitle>{\"Are you sure to remove all the measurements?\"}</DialogTitle>\n          <DialogActions>\n            <Button onClick={this.hideClearMeasureDlg}>\n              Cancel\n            </Button>\n            <Button onClick={this.confirmClearMeasureDlg} autoFocus>\n              Ok\n            </Button>\n          </DialogActions>\n        </Dialog>\n\n        <Dialog\n          open={visibleZippedFileDlg}\n          onClose={this.hideZippedFileDlg}\n        >\n          <DialogTitle>{\"This is a zipped file, would you import into sandbox file system?\"}</DialogTitle>\n          <DialogActions>\n            <Button onClick={this.hideZippedFileDlg}>\n              Cancel\n            </Button>\n            <Button onClick={this.confirmZippedFileDlg} autoFocus>\n              Ok\n            </Button>\n          </DialogActions>\n        </Dialog>\n\n        <Dialog\n          open={this.state.visibleOpenUrl}\n          aria-labelledby=\"form-dialog-title\"\n        >\n          <DialogTitle id=\"form-dialog-title\">{\"Open URL\"}</DialogTitle>\n          <DialogContent>\n            <DialogContentText id=\"alert-dialog-description\">\n              Insert an URL to download a DICOM or image file:\n            </DialogContentText>\n            <TextField\n              autoFocus\n              margin=\"dense\"\n              id=\"id-open-url\"\n              inputRef={input => (this.openUrlField = input)}\n              fullWidth\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => this.hideOpenUrl(false)}>\n              Cancel\n            </Button>\n            <Button onClick={() => this.hideOpenUrl(true)} autoFocus>\n              Ok\n            </Button>\n          </DialogActions>\n        </Dialog>\n\n        <Popover\n          id={'id-layout'}\n          open={visibleLayout}\n          anchorEl={this.state.anchorElLayout}\n          onClose={this.closeLayout}\n          anchorOrigin={{\n            vertical: 'center',\n            horizontal: 'right',\n          }}\n          transformOrigin={{\n            vertical: 'center',\n            horizontal: 'left',\n          }}\n        >\n          <LayoutTool\n            row={this.props.layout[0] - 1}\n            col={this.props.layout[1] - 1}\n            onChange={this.changeLayout}\n          />\n        </Popover>\n\n        <Snackbar\n          anchorOrigin={{\n            vertical: 'top',\n            horizontal: 'center',\n          }}\n          open={visibleVolumeBuilding}\n          autoHideDuration={6000}\n          message=\"Volume building, wait please ...\"\n        />\n\n        <div style={{height: 'calc(100vh - 48px)'}}>\n          {this.buildLayoutGrid()}\n        </div>\n\n        <div>\n          <input\n            type=\"file\"\n            id=\"file_open\"\n            style={{display: \"none\"}}\n            ref={this.fileOpen}\n            onChange={e => this.handleOpenLocalFs(e.target.files)}\n            multiple\n          />\n        </div>\n\n        <div>\n          <input\n            type=\"file\"\n            id=\"file_dicomdir\"\n            style={{display: \"none\"}}\n            ref={this.openDicomdir}\n            onChange={e => this.handleOpenDicomdir(e.target.files)}\n            webkitdirectory=\"\" mozdirectory=\"\" directory=\"\" multiple\n          />\n        </div>\n\n        <div>\n          <input\n            type=\"file\"\n            id=\"file_folder\"\n            style={{display: \"none\"}}\n            ref={this.openFolder}\n            onChange={e => this.handleOpenFolder(e.target.files)}\n            webkitdirectory=\"\" mozdirectory=\"\" directory=\"\" multiple\n          />\n        </div>\n\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    localFileStore: state.localFileStore,\n    files: state.files,\n    isOpen: state.isOpen,\n    tool: state.tool,\n    activeDcmIndex: state.activeDcmIndex,\n    measurements: state.measurements,\n    layout: state.layout,\n    dicomdir: state.dicomdir,\n    fsZippedFile: state.fsZippedFile,\n  }\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    clearingStore: () => dispatch(clearStore()),\n    setLocalFileStore: (file) => dispatch(localFileStore(file)),\n    toolStore: (tool) => dispatch(dcmTool(tool)),\n    isOpenStore: (value) => dispatch(dcmIsOpen(value)),\n    setActiveDcm: (dcm) => dispatch(activeDcm(dcm)),\n    setActiveDcmIndex: (index) => dispatch(activeDcmIndex(index)),\n    setActiveMeasurements: (measurements) => dispatch(activeMeasurements(measurements)),\n    setLayoutStore: (row, col) => dispatch(setLayout(row, col)),\n    setDicomdirStore: (dicomdir) => dispatch(setDicomdir(dicomdir)),\n    setFsZippedFile: (file) => dispatch(setZippedFile(file)),\n    setVolumeStore: (file) => dispatch(setVolume(file)),\n    setFilesStore: (files) => dispatch(filesStore(files)),\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(App))\n"]},"metadata":{},"sourceType":"module"}